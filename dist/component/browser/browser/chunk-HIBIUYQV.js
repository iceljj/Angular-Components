import{t as v}from"./chunk-LM5MDKJD.js";import{j as f,l as C,o as y}from"./chunk-3BOVJI26.js";import{Ga as g,Gc as p,Kb as l,Sb as r,Tb as d,Ub as c,Vb as o,gb as a,hc as u,rc as h,sb as m,yb as s}from"./chunk-SV3L42UN.js";import"./chunk-IJBWTILK.js";var _=e=>({backgroundColor:e});function w(e,t){if(e&1&&o(0,"div",6),e&2){let n=t.$implicit,i=u();r("ngStyle",p(2,_,i.color)),l("data-id",n)}}function O(e,t){if(e&1&&o(0,"div",7),e&2){let n=t.$implicit,i=u();r("ngStyle",p(2,_,i.color)),l("data-id",n)}}var b=class e{duration=30;sandCount=100;color="#F5D142";size=100;upperSandArray=[];lowerSandArray=[];intervalId;animationQueue=[];isAnimating=!1;ngOnChanges(t){(t.duration||t.sandCount)&&this.reset()}ngAfterViewInit(){this.startCountdown()}reset(){this.upperSandArray=Array.from({length:this.sandCount},(t,n)=>n),this.lowerSandArray=[],this.animationQueue=[...this.upperSandArray],clearInterval(this.intervalId)}startCountdown(){this.reset();let t=Math.floor(this.duration*1e3/this.sandCount),n=0;this.intervalId=setInterval(()=>{n<this.upperSandArray.length?(this.dropRandomGrain(),n++):clearInterval(this.intervalId)},t)}dropRandomGrain(){if(this.isAnimating)return;let t=Math.floor(Math.random()*this.upperSandArray.length),n=this.upperSandArray[t];this.isAnimating=!0,this.animationQueue.push(n),setTimeout(()=>{this.lowerSandArray.unshift(n),this.upperSandArray.splice(t,1),this.animationQueue.pop(),this.isAnimating=!1},600)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=m({type:e,selectors:[["app-countdown-timer"]],inputs:{duration:"duration",sandCount:"sandCount",color:"color",size:"size"},features:[g],decls:6,vars:6,consts:[[1,"hourglass-container"],[1,"upper-half"],["class","sand-grain",3,"ngStyle",4,"ngFor","ngForOf"],[1,"neck"],[1,"lower-half"],["class","sand-grain fallen",3,"ngStyle",4,"ngFor","ngForOf"],[1,"sand-grain",3,"ngStyle"],[1,"sand-grain","fallen",3,"ngStyle"]],template:function(n,i){n&1&&(d(0,"div",0)(1,"div",1),s(2,w,1,4,"div",2),c(),o(3,"div",3),d(4,"div",4),s(5,O,1,4,"div",5),c()()),n&2&&(h("width",i.size,"px")("height",i.size*1.8,"px"),a(2),r("ngForOf",i.upperSandArray),a(3),r("ngForOf",i.lowerSandArray))},dependencies:[y,f,C,v],styles:['.hourglass-container[_ngcontent-%COMP%]{position:relative;margin:0 auto;overflow:hidden}.hourglass-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;border:2px solid rgba(200,200,200,.8);border-radius:5%;pointer-events:none}.hourglass-container[_ngcontent-%COMP%]   .upper-half[_ngcontent-%COMP%], .hourglass-container[_ngcontent-%COMP%]   .lower-half[_ngcontent-%COMP%]{position:absolute;width:100%;height:45%;display:flex;flex-wrap:wrap;align-content:flex-end;background-color:#c8c8c81a;padding:4px;box-sizing:border-box;clip-path:polygon(10% 0%,90% 0%,55% 100%,45% 100%)}.hourglass-container[_ngcontent-%COMP%]   .lower-half[_ngcontent-%COMP%]{top:55%;clip-path:polygon(45% 0%,55% 0%,90% 100%,10% 100%)}.hourglass-container[_ngcontent-%COMP%]   .neck[_ngcontent-%COMP%]{position:absolute;top:45%;left:50%;transform:translate(-50%);width:10%;height:10%;background-color:#c8c8c81a;z-index:1}.hourglass-container[_ngcontent-%COMP%]   .sand-grain[_ngcontent-%COMP%]{width:10%;height:10%;margin:1px;background-color:#f5d142;transition:all .4s ease-in-out;will-change:transform,opacity;pointer-events:none}.hourglass-container[_ngcontent-%COMP%]   .sand-grain.fallen[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fall .6s forwards}@keyframes _ngcontent-%COMP%_fall{0%{transform:translateY(0) scale(1);opacity:1}20%{transform:translateY(50%) scale(.9);opacity:.9}to{transform:translateY(100%) scale(.8);opacity:.6}}']})};export{b as CountdownTimer};
