import{j as I,k as O,o as w}from"./chunk-3BOVJI26.js";import{Bb as b,M as x,R as S,Sb as l,Tb as s,Ub as c,ac as f,f as g,fc as C,gb as r,hc as o,ra as m,sa as u,sb as _,sc as k,uc as v,vc as p,wc as h,yb as a}from"./chunk-SV3L42UN.js";import"./chunk-IJBWTILK.js";function P(i,e){i&1&&(s(0,"span"),p(1,"\u2713"),c())}function L(i,e){i&1&&(s(0,"span"),p(1,"\u2022"),c())}function E(i,e){if(i&1&&(s(0,"span"),p(1),c()),i&2){let t=o().$implicit;r(),h(t.id)}}function T(i,e){if(i&1){let t=f();s(0,"div",4),C("click",function(){let d=m(t).$implicit,M=o();return u(M.handleStepClick(d.id))}),s(1,"div",5),p(2),c(),s(3,"div",6),a(4,P,2,0,"span",7)(5,L,2,0,"span",7)(6,E,2,1,"span",7),c()()}if(i&2){let t=e.$implicit,n=o();v(n.getStepStatusClass(t)),k("current",t.id===n.currentStepId)("disabled",!n.isStepClickable(t.id)),r(2),h(t.title),r(2),l("ngIf",t.completed),r(),l("ngIf",!t.completed&&t.id===n.currentStepId),r(),l("ngIf",!t.completed&&t.id!==n.currentStepId)}}function D(i,e){if(i&1){let t=f();s(0,"div",8)(1,"button",9),C("click",function(){m(t);let d=o();return u(d.completeCurrentStep())}),p(2,"\u5B8C\u6210\u5F53\u524D\u6B65\u9AA4"),c()()}}var y=class i{steps=[{id:1,title:"\u9700\u6C42\u6536\u96C6",completed:!1,description:"\u4E0E\u5BA2\u6237\u6C9F\u901A\u9700\u6C42\u7EC6\u8282"},{id:2,title:"UI\u8BBE\u8BA1",completed:!1,description:"\u521B\u5EFA\u754C\u9762\u539F\u578B\u548C\u89C6\u89C9\u7A3F"},{id:3,title:"\u5F00\u53D1\u5B9E\u73B0",completed:!1,description:"\u524D\u7AEF\u7EC4\u4EF6\u5F00\u53D1\u4E0E\u96C6\u6210"},{id:4,title:"\u6D4B\u8BD5\u9A8C\u8BC1",completed:!1,description:"\u529F\u80FD\u6D4B\u8BD5\u4E0E\u7528\u6237\u9A8C\u6536"},{id:5,title:"\u90E8\u7F72\u4E0A\u7EBF",completed:!1,description:"\u751F\u4EA7\u73AF\u5883\u90E8\u7F72\u4E0E\u76D1\u63A7"}];stepChange=new b;currentStepId=1;lastCompletedIndex=-1;clickSubject=new g;clickSubscription;constructor(){this.clickSubscription=this.clickSubject.pipe(S(),x(100)).subscribe(e=>{this.handleActualStepClick(e)}),this.updateLastCompletedIndex()}ngOnDestroy(){this.clickSubscription.unsubscribe()}updateLastCompletedIndex(){this.lastCompletedIndex=this.steps.reduce((e,t,n)=>t.completed?n:e,-1)}isStepClickable(e){return this.areAllStepsCompleted()?!0:this.steps.findIndex(n=>n.id===e)<=this.lastCompletedIndex+1}handleStepClick(e){this.isStepClickable(e)&&this.clickSubject.next(e)}handleActualStepClick(e){this.currentStepId=e,this.stepChange.emit(e)}get currentStep(){return this.steps.find(e=>e.id===this.currentStepId)}get canCompleteCurrentStep(){let e=this.currentStep;return e&&!e.completed}completeCurrentStep(){let e=this.steps.findIndex(t=>t.id===this.currentStepId);e!==-1&&(this.steps[e].completed=!0,e>this.lastCompletedIndex&&(this.lastCompletedIndex=e),this.stepChange.emit(this.currentStepId),e<this.steps.length-1&&(this.currentStepId=this.steps[e+1].id,this.stepChange.emit(this.currentStepId)))}getStepStatusClass(e){return e.completed?"completed":"pending"}areAllStepsCompleted(){return this.steps.every(e=>e.completed)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-check-list-small"]],inputs:{steps:"steps"},outputs:{stepChange:"stepChange"},decls:4,vars:2,consts:[[1,"checklist-container"],[1,"steps-list"],["class","step-card",3,"class","current","disabled","click",4,"ngFor","ngForOf"],["class","complete-action",4,"ngIf"],[1,"step-card",3,"click"],[1,"step-title"],[1,"step-status-indicator"],[4,"ngIf"],[1,"complete-action"],[3,"click"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1),a(2,T,7,10,"div",2),c(),a(3,D,3,0,"div",3),c()),t&2&&(r(2),l("ngForOf",n.steps),r(),l("ngIf",n.canCompleteCurrentStep))},dependencies:[w,I,O],styles:[".checklist-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:8px;gap:4px}.steps-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:4px}.step-card[_ngcontent-%COMP%]{display:flex;align-items:center;padding:2px 8px;border-radius:8px;cursor:pointer;transition:all .2s ease;white-space:nowrap}.step-card.pending[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#888}.step-card.current[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2;font-weight:500;transform:scale(1.05);box-shadow:0 0 4px #1976d24d}.step-card.completed[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#4caf50}.step-card.disabled[_ngcontent-%COMP%]{opacity:.7;cursor:not-allowed}.step-title[_ngcontent-%COMP%]{font-size:12px;padding:2px;max-width:120px;overflow:hidden;text-overflow:ellipsis}.step-status-indicator[_ngcontent-%COMP%]{margin-left:4px;font-size:11px}.complete-action[_ngcontent-%COMP%]{margin-top:8px}.complete-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;border:none;border-radius:16px;padding:4px 12px;font-size:11px;cursor:pointer;transition:background-color .2s}.complete-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1565c0}"]})};export{y as CheckListSmall};
