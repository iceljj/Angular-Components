import{b as N}from"./chunk-UA4W5N5V.js";import{a as B}from"./chunk-P2YZ436E.js";import{a as D,b as I,c as b,d as E,e as S,f as T,g as V,h as F,j}from"./chunk-KXCR7BPE.js";import"./chunk-IXJJZZ6I.js";import"./chunk-H6K4Y3A4.js";import"./chunk-ZWUX7CTM.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-KZMWHYDP.js";import"./chunk-CJMRG5AD.js";import"./chunk-BLFK5LLU.js";import"./chunk-TRBTKR37.js";import"./chunk-42C7ZIID.js";import"./chunk-D7G6EMIG.js";import"./chunk-OZYWYLNK.js";import"./chunk-IM754QKO.js";import"./chunk-OQUQBZSK.js";import"./chunk-G7UVPHBV.js";import"./chunk-LM5MDKJD.js";import{j as O,k as M,o as w}from"./chunk-3BOVJI26.js";import{Sb as s,Tb as c,Ub as o,Vb as y,ac as v,fc as u,gb as n,hc as d,qc as k,ra as p,sa as m,sb as P,sc as h,vc as a,wc as g,xc as x,yb as _}from"./chunk-SV3L42UN.js";import{j as f}from"./chunk-IJBWTILK.js";function A(i,t){i&1&&(c(0,"span",10),a(1,"\u8BF7\u9009\u62E9\u5730\u5740"),o())}function q(i,t){i&1&&(c(0,"span",16),a(1,"/"),o())}function G(i,t){i&1&&(c(0,"span",16),a(1,"/"),o())}function H(i,t){if(i&1&&(c(0,"span",11)(1,"span",12),a(2),o(),_(3,q,2,0,"span",13),c(4,"span",14),a(5),o(),_(6,G,2,0,"span",13),c(7,"span",15),a(8),o()()),i&2){let e=d();n(2),g(e.selectedProvince||""),n(),s("ngIf",e.selectedProvince&&(e.selectedCity||e.selectedDistrict)),n(2),g(e.selectedCity||""),n(),s("ngIf",e.selectedCity&&e.selectedDistrict),n(2),g(e.selectedDistrict||"")}}function J(i,t){if(i&1&&(c(0,"div",22)(1,"span"),a(2),o()()),i&2){let e=d(2);h("active",e.currentColumn==="city"),n(2),g(e.selectedCity||"\u9009\u62E9\u57CE\u5E02")}}function K(i,t){if(i&1&&(c(0,"div",22)(1,"span"),a(2),o()()),i&2){let e=d(2);h("active",e.currentColumn==="district"),n(2),g(e.selectedDistrict||"\u9009\u62E9\u533A\u53BF")}}function L(i,t){if(i&1&&(c(0,"ion-picker-column-option",27),a(1),o()),i&2){let e=t.$implicit;s("value",e),n(),x(" ",e," ")}}function Q(i,t){if(i&1&&(c(0,"ion-picker-column-option",27),a(1),o()),i&2){let e=t.$implicit;s("value",e),n(),x(" ",e," ")}}function R(i,t){if(i&1&&(c(0,"ion-picker-column-option",27),a(1),o()),i&2){let e=t.$implicit;s("value",e),n(),x(" ",e," ")}}function U(i,t){if(i&1){let e=v();c(0,"ion-toolbar")(1,"ion-buttons",17)(2,"ion-button",18),u("click",function(){p(e),d();let r=k(6);return m(r.dismiss(null,"cancel"))}),a(3,"\u53D6\u6D88"),o()(),c(4,"ion-title"),a(5,"\u9009\u62E9\u5730\u5740"),o(),c(6,"ion-buttons",19)(7,"ion-button",20),u("click",function(){p(e);let r=d();return m(r.confirmSelection())}),a(8,"\u786E\u5B9A"),o()()(),c(9,"div",21)(10,"div",22)(11,"span"),a(12),o()(),_(13,J,3,3,"div",23)(14,K,3,3,"div",23),o(),c(15,"div",24)(16,"ion-picker")(17,"ion-picker-column",25,1),u("ionChange",function(r){p(e);let C=d();return m(C.onProvinceChange(r))})("ionColChange",function(){p(e);let r=d();return m(r.onColumnFocus("province"))}),_(19,L,2,2,"ion-picker-column-option",26),o(),c(20,"ion-picker-column",25,2),u("ionChange",function(r){p(e);let C=d();return m(C.onCityChange(r))})("ionColChange",function(){p(e);let r=d();return m(r.onColumnFocus("city"))}),_(22,Q,2,2,"ion-picker-column-option",26),o(),c(23,"ion-picker-column",25,3),u("ionChange",function(r){p(e);let C=d();return m(C.onDistrictChange(r))})("ionColChange",function(){p(e);let r=d();return m(r.onColumnFocus("district"))}),_(25,R,2,2,"ion-picker-column-option",26),o()()()}if(i&2){let e=d();n(10),h("active",e.currentColumn==="province"),n(2),g(e.selectedProvince||"\u9009\u62E9\u7701\u4EFD"),n(),s("ngIf",e.selectedProvince),n(),s("ngIf",e.selectedCity),n(3),s("value",e.selectedProvince),n(2),s("ngForOf",e.provinces),n(),s("value",e.selectedCity),n(2),s("ngForOf",e.cities),n(),s("value",e.selectedDistrict),n(2),s("ngForOf",e.districts)}}var z=class i{provinces=[];cities=[];districts=[];selectedProvince=null;selectedCity=null;selectedDistrict=null;currentColumn="province";pcaData={};constructor(){B({chevronDownOutline:N})}ngOnInit(){return f(this,null,function*(){try{let t=yield fetch("assets/pca.json");this.pcaData=yield t.json(),this.provinces=Object.keys(this.pcaData),this.provinces.length>0&&(this.selectedProvince=this.provinces[0],this.onProvinceChange({detail:{value:this.selectedProvince}}))}catch(t){console.error("Failed to load pca data:",t)}})}onProvinceChange(t){if(this.selectedProvince=t.detail.value,this.selectedCity=null,this.selectedDistrict=null,this.selectedProvince){let e=this.pcaData[this.selectedProvince];this.cities=Object.keys(e),this.cities.length>0?(this.selectedCity=this.cities[0],this.onCityChange({detail:{value:this.selectedCity}})):this.districts=[]}else this.cities=[],this.districts=[]}onCityChange(t){if(this.selectedCity=t.detail.value,this.selectedDistrict=null,this.selectedProvince&&this.selectedCity){let e=this.pcaData[this.selectedProvince];this.districts=e[this.selectedCity]||[],this.districts.length>0&&(this.selectedDistrict=this.districts[0])}else this.districts=[]}onDistrictChange(t){this.selectedDistrict=t.detail.value}onColumnFocus(t){this.currentColumn=t}confirmSelection(){let t={province:this.selectedProvince,city:this.selectedCity,district:this.selectedDistrict},e=document.querySelector("ion-modal");e&&e.dismiss(t,"confirm")}onDidDismiss(t){if(t.detail.role==="confirm"){let e=t.detail.data;this.selectedProvince=e.province,this.selectedCity=e.city,this.selectedDistrict=e.district,console.log("Selected address:",e)}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=P({type:i,selectors:[["app-address-picker"]],decls:8,vars:2,consts:[["addressModal",""],["provinceColumn",""],["cityColumn",""],["districtColumn",""],["id","open-modal",1,"address-selector"],[1,"address-display"],["class","placeholder",4,"ngIf"],["class","selected-address",4,"ngIf"],["name","chevron-down-outline",1,"dropdown-icon"],["trigger","open-modal",1,"address-modal",3,"didDismiss"],[1,"placeholder"],[1,"selected-address"],[1,"province"],["class","divider",4,"ngIf"],[1,"city"],[1,"district"],[1,"divider"],["slot","start"],["color","medium",3,"click"],["slot","end"],["color","primary",3,"click"],[1,"picker-header"],[1,"header-item"],["class","header-item",3,"active",4,"ngIf"],[1,"picker-container"],[3,"ionChange","ionColChange","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,l){if(e&1){let r=v();c(0,"div",4)(1,"div",5),_(2,A,2,0,"span",6)(3,H,9,5,"span",7),o(),y(4,"ion-icon",8),o(),c(5,"ion-modal",9,0),u("didDismiss",function($){return p(r),m(l.onDidDismiss($))}),_(7,U,26,11,"ng-template"),o()}e&2&&(n(2),s("ngIf",!l.selectedProvince&&!l.selectedCity&&!l.selectedDistrict),n(),s("ngIf",l.selectedProvince||l.selectedCity||l.selectedDistrict))},dependencies:[I,b,D,E,S,T,V,F,j,w,O,M],styles:['.address-selector[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;min-width:150px;max-width:100%;height:auto;padding:12px 16px;border:1px solid #ddd;border-radius:8px;background-color:#fff;cursor:pointer}.address-selector[_ngcontent-%COMP%]   .address-display[_ngcontent-%COMP%]{flex:1;text-align:left;word-break:break-all;line-height:1.4}.address-selector[_ngcontent-%COMP%]   .address-display[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{color:#999}.address-selector[_ngcontent-%COMP%]   .address-display[_ngcontent-%COMP%]   .selected-address[_ngcontent-%COMP%]   .province[_ngcontent-%COMP%], .address-selector[_ngcontent-%COMP%]   .address-display[_ngcontent-%COMP%]   .selected-address[_ngcontent-%COMP%]   .city[_ngcontent-%COMP%], .address-selector[_ngcontent-%COMP%]   .address-display[_ngcontent-%COMP%]   .selected-address[_ngcontent-%COMP%]   .district[_ngcontent-%COMP%]{color:#333}.address-selector[_ngcontent-%COMP%]   .address-display[_ngcontent-%COMP%]   .selected-address[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{color:#ccc;padding:0 6px}.address-selector[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{color:#999;font-size:18px;margin-left:8px}.address-modal[_ngcontent-%COMP%]{--height: 400px;--max-width: 500px;--border-radius: 16px 16px 0 0;--box-shadow: 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05)}@media (min-width: 768px){.address-modal[_ngcontent-%COMP%]{--max-width: 500px;--border-radius: 16px;--height: 450px;align-items:center;justify-content:center}}.address-modal[_ngcontent-%COMP%]   .picker-header[_ngcontent-%COMP%]{display:flex;padding:0 16px;border-bottom:1px solid #eee}.address-modal[_ngcontent-%COMP%]   .picker-header[_ngcontent-%COMP%]   .header-item[_ngcontent-%COMP%]{flex:1;text-align:center;padding:14px 0;font-size:14px;color:#666;position:relative}.address-modal[_ngcontent-%COMP%]   .picker-header[_ngcontent-%COMP%]   .header-item.active[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:500}.address-modal[_ngcontent-%COMP%]   .picker-header[_ngcontent-%COMP%]   .header-item.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:30px;height:3px;background:var(--ion-color-primary);border-radius:3px}.address-modal[_ngcontent-%COMP%]   .picker-container[_ngcontent-%COMP%]   ion-picker[_ngcontent-%COMP%]{margin-bottom:var(--ion-safe-area-bottom, 0)}.address-modal[_ngcontent-%COMP%]   .picker-container[_ngcontent-%COMP%]   ion-picker[_ngcontent-%COMP%]   ion-picker-column[_ngcontent-%COMP%]{padding:0;width:33vw;font-size:17px}.address-modal[_ngcontent-%COMP%]   .picker-container[_ngcontent-%COMP%]   ion-picker[_ngcontent-%COMP%]   ion-picker-column[_ngcontent-%COMP%]:not(:first-child){border-left:1px solid #f0f0f0}ion-modal[_ngcontent-%COMP%]{align-items:end}@media (min-width: 768px){ion-modal[_ngcontent-%COMP%]{align-items:center}}']})};export{z as Picker};
