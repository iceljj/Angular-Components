{"version":3,"file":"fmode-video.mjs","sources":["../../../projects/fmode-video/src/lib/videogular.ts","../../../projects/fmode-video/src/lib/videogular.html","../../../projects/fmode-video/src/lib/videogular.module.ts","../../../projects/fmode-video/src/public-api.ts","../../../projects/fmode-video/src/fmode-video.ts"],"sourcesContent":["import {\r\n  Component,\r\n  ViewChild,\r\n  ElementRef,\r\n  OnInit,\r\n  Renderer2,\r\n  OnDestroy,\r\n  AfterViewInit,\r\n  ChangeDetectorRef,\r\n  NgZone\r\n} from '@angular/core';\r\nimport { VgApiService, VgPlayerComponent } from '@videogular/ngx-videogular/core';\r\nimport { VgControlsModule } from '@videogular/ngx-videogular/controls';\r\nimport { VgCoreModule } from '@videogular/ngx-videogular/core';\r\nimport { VgOverlayPlayModule } from '@videogular/ngx-videogular/overlay-play';\r\nimport { VgBufferingModule } from '@videogular/ngx-videogular/buffering';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport Hls from 'hls.js';\r\n\r\n/**\r\n * è§†é¢‘æ’­æ”¾å™¨ç»„ä»¶ (ä½¿ç”¨HLSå®ç°)\r\n * @remarks\r\n * åŸºäºHLS.jså®ç°å¤§å‚çº§åˆ«çš„è§†é¢‘æ’­æ”¾åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š\r\n * 1. æ”¯æŒHLSæµåª’ä½“æ’­æ”¾\r\n * 2. æ™ºèƒ½é¢„åŠ è½½å’Œç¼“å­˜ç®¡ç†\r\n * 3. è‡ªé€‚åº”ç ç‡åˆ‡æ¢\r\n * 4. å¤šç§è§†å›¾æ¨¡å¼ï¼ˆå®½å±/å…³ç¯/æ— é»‘è¾¹ï¼‰\r\n *\r\n * æ³¨æ„ï¼šæœ¬ç»„ä»¶å·²å®Œå…¨é‡æ„ä»¥æ”¯æŒHLSåè®®\r\n *\r\n * @example\r\n * <app-videogular [videoSources]=\"hlsSources\"></app-videogular>\r\n */\r\n@Component({\r\n  selector: 'app-videogular',\r\n  standalone: true,\r\n  imports: [\r\n    VgCoreModule,\r\n    VgControlsModule,\r\n    VgOverlayPlayModule,\r\n    VgBufferingModule,\r\n    CommonModule,\r\n    FormsModule\r\n  ],\r\n  templateUrl: './videogular.html',\r\n  styleUrls: ['./videogular.scss']\r\n})\r\nexport class Videogular implements OnInit, OnDestroy, AfterViewInit {\r\n  /** æ’­æ”¾å™¨APIå®ä¾‹ */\r\n  public api!: VgApiService;\r\n\r\n  /** HLSå®ä¾‹ */\r\n  private hls!: Hls;\r\n\r\n  /** æ’­æ”¾å™¨DOMå…ƒç´ å¼•ç”¨ */\r\n  @ViewChild('mediaPlayer') player!: VgPlayerComponent;\r\n  @ViewChild('media') media!: ElementRef<HTMLVideoElement>;\r\n  @ViewChild('scrubBar') scrubBar!: ElementRef;\r\n\r\n\r\n  // çŠ¶æ€æ§åˆ¶å˜é‡\r\n  /**\r\n   * æ˜¯å¦æ­£åœ¨æ’­æ”¾\r\n   */\r\n  public isPlaying = false;\r\n\r\n  /**\r\n   * æ˜¯å¦æ˜¾ç¤ºè¦†ç›–æ’­æ”¾æŒ‰é’®\r\n   */\r\n  public showOverlayPlay = true;\r\n\r\n  /**\r\n   * æ˜¯å¦éšè—æ§åˆ¶æ \r\n   */\r\n  public hideControls = false;\r\n\r\n  /**\r\n   * æ˜¯å¦æ­£åœ¨ç¼“å†²\r\n   */\r\n  public isBuffering = false;\r\n\r\n  /**\r\n   * æ˜¯å¦åŠ è½½é”™è¯¯\r\n   */\r\n  public loadError = false;\r\n\r\n  /**\r\n   * æ˜¯å¦ä¸ºç›´æ’­æµ\r\n   */\r\n  public isLiveStream = false;\r\n\r\n  // éŸ³é¢‘æ§åˆ¶\r\n  /**\r\n   * éŸ³é‡å¤§å° (0-1)\r\n   */\r\n  public volume = 1.0;\r\n\r\n  /**\r\n   * æ˜¯å¦é™éŸ³\r\n   */\r\n  public isMuted = false;\r\n\r\n  // æ’­æ”¾æ§åˆ¶\r\n  /**\r\n   * æ’­æ”¾é€Ÿç‡\r\n   */\r\n  public playbackRate = 1.0;\r\n\r\n  /**\r\n   * æ’­æ”¾è¿›åº¦ç™¾åˆ†æ¯”\r\n   */\r\n  public progress = 0;\r\n\r\n  /**\r\n   * ç¼“å†²ç™¾åˆ†æ¯”\r\n   */\r\n  public bufferPercentage = 0;\r\n\r\n  /**\r\n   * ç¼“å†²åŒºé—´åˆ—è¡¨\r\n   */\r\n  public bufferedRanges: any[] = [];\r\n\r\n  /**\r\n   * ç¼“å†²å¼€å§‹æ—¶é—´\r\n   */\r\n  public bufferStart = 0;\r\n\r\n  /**\r\n   * ç¼“å†²ç»“æŸæ—¶é—´\r\n   */\r\n  public bufferEnd = 0;\r\n\r\n  /**\r\n   * è§†é¢‘æ€»æ—¶é•¿\r\n   */\r\n  public totalDuration = 0;\r\n\r\n  // è§†å›¾æ¨¡å¼\r\n  /**\r\n   * æ˜¯å¦ä¸ºå®½å±æ¨¡å¼\r\n   */\r\n  public isWidescreen = false;\r\n\r\n  /**\r\n   * æ˜¯å¦ä¸ºå…³ç¯æ¨¡å¼\r\n   */\r\n  public isTheaterMode = false;\r\n\r\n  /**\r\n   * æ˜¯å¦ä¸ºç½‘é¡µå…¨å±\r\n   */\r\n  public isWebFullscreen = false;\r\n\r\n  // æ§åˆ¶é¢æ¿çŠ¶æ€\r\n  /**\r\n   * æ˜¯å¦æ˜¾ç¤ºéŸ³é‡æ»‘å—\r\n   */\r\n  public showVolumeSlider = false;\r\n\r\n  /**\r\n   * æ˜¯å¦æ˜¾ç¤ºç”»è´¨é€‰é¡¹\r\n   */\r\n  public showQualityOptions = false;\r\n\r\n  /**\r\n   * æ˜¯å¦æ˜¾ç¤ºæ’­æ”¾é€Ÿåº¦é€‰é¡¹\r\n   */\r\n  public showSpeedOptions = false;\r\n\r\n  /**\r\n   * æ˜¯å¦æ˜¾ç¤ºè®¾ç½®èœå•\r\n   */\r\n  public showSettingsMenu = false;\r\n\r\n  // æ’­æ”¾é€‰é¡¹\r\n  /**\r\n   * æ’­æ”¾é€Ÿåº¦é€‰é¡¹åˆ—è¡¨\r\n   */\r\n  public speedOptions = [\r\n    { label: '2.0x', value: 2.0 },\r\n    { label: '1.5x', value: 1.5 },\r\n    { label: '1.25x', value: 1.25 },\r\n    { label: 'æ­£å¸¸', value: 1.0 },\r\n    { label: '0.75x', value: 0.75 },\r\n    { label: '0.5x', value: 0.5 }\r\n  ];\r\n\r\n  // HLSæºé…ç½®\r\n  /**\r\n   * è§†é¢‘å°é¢å›¾\r\n   */\r\n  public posterImage = 'assets/images/video-thumbnail.jpg';\r\n\r\n  /**\r\n   * å½“å‰é€‰æ‹©çš„ç”»è´¨\r\n   */\r\n  public selectedQuality: any;\r\n\r\n  /**\r\n   * å¯ç”¨ç”»è´¨åˆ—è¡¨\r\n   */\r\n  public availableQualities: any[] = [];\r\n\r\n  /**\r\n   * å½“å‰HLSæµURL\r\n   */\r\n  public currentHlsUrl = '';\r\n\r\n  /**\r\n   * HLSè´¨é‡çº§åˆ«åˆ—è¡¨\r\n   */\r\n  public hlsLevels: any[] = [];\r\n\r\n  // HLSé…ç½®å‚æ•°\r\n  /**\r\n   * HLSé…ç½®é€‰é¡¹\r\n   */\r\n  private hlsConfig: any = {\r\n    maxBufferLength: 30,       // æœ€å¤§ç¼“å†²é•¿åº¦(ç§’)\r\n    maxMaxBufferLength: 60,   // æœ€å¤§ç¼“å†²é•¿åº¦ä¸Šé™\r\n    maxBufferSize: 60 * 1000 * 1000, // æœ€å¤§ç¼“å†²å¤§å°(60MB)\r\n    highBufferWatchdogPeriod: 1, // ç›‘æ§ç¼“å†²çŠ¶æ€çš„æ—¶é—´é—´éš”\r\n    enableWorker: true,        // å¯ç”¨Web Worker\r\n    lowLatencyMode: true,      // ä½å»¶è¿Ÿæ¨¡å¼\r\n    backBufferLength: 5,       // ä¿ç•™çš„ç¼“å†²é•¿åº¦\r\n    testBandwidth: true,       // å¯ç”¨å¸¦å®½æ£€æµ‹\r\n    debug: false,              // ç¦ç”¨è°ƒè¯•æ—¥å¿—\r\n    fragLoadingRetryDelay: 500, // ç‰‡æ®µåŠ è½½å¤±è´¥é‡è¯•å»¶æ—¶(ms)\r\n    manifestLoadingTimeOut: 10000 // æ’­æ”¾åˆ—è¡¨åŠ è½½è¶…æ—¶æ—¶é—´(ms)\r\n  };\r\n\r\n  // é¢„åŠ è½½ç›¸å…³å˜é‡\r\n  /**\r\n   * æ˜¯å¦æ­£åœ¨é¢„åŠ è½½\r\n   */\r\n  private isPreloading = false;\r\n\r\n  // å†…éƒ¨çŠ¶æ€ç®¡ç†\r\n  /**\r\n   * æ§åˆ¶æ éšè—å®šæ—¶å™¨\r\n   */\r\n  private controlHideTimeout: any;\r\n\r\n  /**\r\n   * ç©ºæ ¼é”®é˜²æŠ–æ ‡è®°\r\n   */\r\n  private spaceKeyDebounced = false;\r\n\r\n  /**\r\n   * æ˜¯å¦æ­£åœ¨æ‹–åŠ¨è¿›åº¦æ¡\r\n   */\r\n  private isScrubbing = false;\r\n\r\n  /**\r\n   * æ‹–åŠ¨å¼€å§‹æ—¶çš„é¼ æ ‡Xåæ ‡\r\n   */\r\n  private scrubStartX = 0;\r\n\r\n  /**\r\n   * æ‹–åŠ¨å¼€å§‹æ—¶çš„æ’­æ”¾ç™¾åˆ†æ¯”\r\n   */\r\n  private scrubStartPercentage = 0;\r\n\r\n  /**\r\n   * æ‹–åŠ¨å‰æ˜¯å¦æ­£åœ¨æ’­æ”¾\r\n   */\r\n  private wasPlaying = false;\r\n\r\n  /**\r\n   * æ§åˆ¶é¢æ¿é˜²æŠ–å®šæ—¶å™¨é›†åˆ\r\n   */\r\n  private controlDebounceTimers: { [key: string]: any } = {};\r\n\r\n  /**\r\n   * å½“å‰é‡è¯•æ¬¡æ•°\r\n   */\r\n  private retryCount = 0;\r\n\r\n  /**\r\n   * æœ€å¤§é‡è¯•æ¬¡æ•°\r\n   */\r\n  private maxRetries = 1;\r\n\r\n  /**\r\n   * ç¼“å†²è¶…æ—¶å®šæ—¶å™¨\r\n   */\r\n  private bufferingTimeout: any;\r\n\r\n  /**\r\n   * ç¼“å†²è¶…æ—¶æŒç»­æ—¶é—´(æ¯«ç§’)\r\n   */\r\n  private bufferingTimeoutDuration = 3000;\r\n\r\n  /**\r\n   * ç¼“å†²æ›´æ–°è®¡æ—¶å™¨\r\n   */\r\n  private bufferUpdateInterval: any;\r\n\r\n  /**\r\n   * ç»„ä»¶æ„é€ å‡½æ•°\r\n   * @param renderer Angularæ¸²æŸ“å™¨ï¼Œç”¨äºæ“ä½œDOMå…ƒç´ \r\n   * @param cdr å˜æ›´æ£€æµ‹å™¨ï¼Œç”¨äºå¼ºåˆ¶åˆ·æ–°UI\r\n   * @param zone AngularåŒºåŸŸï¼Œç”¨äºç®¡ç†å¼‚æ­¥æ“ä½œ\r\n   */\r\n  constructor(\r\n    private renderer: Renderer2,\r\n    private cdr: ChangeDetectorRef,\r\n    private zone: NgZone\r\n  ) {\r\n  }\r\n\r\n  /**\r\n   * ç»„ä»¶åˆå§‹åŒ–é’©å­\r\n   * åˆå§‹åŒ–HLSæºåˆ—è¡¨å’Œé»˜è®¤é€‰ä¸­çš„ç”»è´¨\r\n   */\r\n  ngOnInit(): void {\r\n    // åˆå§‹åŒ–HLSæºåˆ—è¡¨\r\n    this.availableQualities = [\r\n      { label: 'è¶…æ¸… 1080p', url: 'public/video/1.m3u8', bitrate: 5000 },\r\n      { label: 'é«˜æ¸… 720p', url: 'public/video/1.m3u8', bitrate: 2500 },\r\n      { label: 'æ ‡æ¸… 480p', url: 'public/video/1.m3u8', bitrate: 1000 },\r\n      { label: 'æµç•… 360p', url: 'public/video/2.m3u8', bitrate: 500 },\r\n    ];\r\n\r\n    this.selectedQuality = this.availableQualities[3];\r\n    this.currentHlsUrl = this.selectedQuality.url;\r\n  }\r\n\r\n  /**\r\n   * è§†å›¾åˆå§‹åŒ–å®Œæˆé’©å­\r\n   * è®¾ç½®å…¨å±€äº‹ä»¶ç›‘å¬å™¨å¹¶åˆå§‹åŒ–HLSæ’­æ”¾å™¨\r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.setupGlobalListeners();\r\n    this.initializeHlsPlayer();\r\n  }\r\n\r\n  /**\r\n   * ç»„ä»¶é”€æ¯é’©å­\r\n   * æ¸…ç†æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬å®šæ—¶å™¨å’ŒHLSå®ä¾‹\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.cleanupResources();\r\n  }\r\n\r\n  /**\r\n   * åˆå§‹åŒ–HLSæ’­æ”¾å™¨\r\n   * åˆ›å»ºå¹¶é…ç½®HLSå®ä¾‹ï¼ŒåŠ è½½è§†é¢‘æºï¼Œè®¾ç½®äº‹ä»¶ç›‘å¬\r\n   */\r\n  private initializeHlsPlayer(): void {\r\n    const videoElement = this.media.nativeElement;\r\n\r\n    // æ¸…ç†å·²æœ‰HLSå®ä¾‹\r\n    if (this.hls) {\r\n      this.hls.destroy();\r\n    }\r\n\r\n    // åˆ›å»ºæ–°çš„HLSå®ä¾‹\r\n    this.hls = new Hls(this.hlsConfig);\r\n\r\n    // ç»‘å®šåˆ°videoå…ƒç´ \r\n    this.hls.attachMedia(videoElement);\r\n\r\n    // è®¾ç½®åˆå§‹è§†é¢‘æº\r\n    this.hls.loadSource(this.currentHlsUrl);\r\n\r\n    // è®¾ç½®HLSäº‹ä»¶ç›‘å¬å™¨\r\n    this.setupHlsEvents();\r\n\r\n    // å»¶è¿Ÿæ£€æµ‹çŠ¶æ€\r\n    setTimeout(() => this.detectStreamType(), 1000);\r\n\r\n    // å¼€å§‹ç¼“å†²æ›´æ–°è®¡æ—¶å™¨\r\n    this.startBufferUpdateTimer();\r\n  }\r\n\r\n  /**\r\n   * è®¾ç½®HLSäº‹ä»¶ç›‘å¬å™¨\r\n   * ä¸ºHLSå®ä¾‹æ·»åŠ å„ç§äº‹ä»¶çš„ç›‘å¬å™¨ï¼Œå¤„ç†æ’­æ”¾åˆ—è¡¨åŠ è½½ã€ç¼“å†²ã€é”™è¯¯ç­‰æƒ…å†µ\r\n   */\r\n  private setupHlsEvents(): void {\r\n    if (!this.hls) return;\r\n\r\n    // ç›‘å¬æ’­æ”¾åˆ—è¡¨åŠ è½½äº‹ä»¶\r\n    this.hls.on(Hls.Events.MANIFEST_LOADED, (event, data) => {\r\n      this.zone.run(() => {\r\n        // è·å–æ‰€æœ‰è´¨é‡çº§åˆ«\r\n        this.hlsLevels = data.levels || [];\r\n\r\n        // é‡ç½®æ’­æ”¾å™¨çŠ¶æ€\r\n        this.loadError = false;\r\n        this.isBuffering = false;\r\n\r\n        // æ£€æµ‹æ˜¯å¦ä¸ºç›´æ’­æµ\r\n        this.detectStreamType();\r\n      });\r\n    });\r\n\r\n    // ç›‘å¬ç‰‡æ®µåŠ è½½äº‹ä»¶\r\n    this.hls.on(Hls.Events.FRAG_LOADED, (event, data) => {\r\n      // å¯åœ¨æ­¤å¤„æ·»åŠ æ•°æ®æ”¶é›†ç‚¹ï¼Œç”¨äºåˆ†æåŠ è½½æ€§èƒ½\r\n    });\r\n\r\n    // ç›‘å¬ç¼“å†²äº‹ä»¶\r\n    this.hls.on(Hls.Events.BUFFER_CREATED, () => {\r\n      // è§¦å‘ç¼“å†²çŠ¶æ€æ›´æ–°\r\n      this.updateBufferDisplay();\r\n    });\r\n\r\n    // ç›‘å¬ç¼“å†²è¿›åº¦\r\n    this.hls.on(Hls.Events.BUFFER_APPENDING, () => {\r\n      // è§¦å‘ç¼“å†²çŠ¶æ€æ›´æ–°\r\n      this.updateBufferDisplay();\r\n    });\r\n\r\n    // ç›‘å¬é”™è¯¯äº‹ä»¶\r\n    this.hls.on(Hls.Events.ERROR, (event, data) => {\r\n      this.zone.run(() => {\r\n        // å¤„ç†ç¼“å†²åœæ»é”™è¯¯\r\n        if (data.details === Hls.ErrorDetails.BUFFER_STALLED_ERROR) {\r\n          this.showBuffering();\r\n        }\r\n        this.handleHlsError(data);\r\n      });\r\n    });\r\n\r\n    // ç›‘å¬ç¼“å†²ç»“æŸäº‹ä»¶\r\n    this.hls.on(Hls.Events.BUFFER_APPENDED, () => {\r\n      this.zone.run(() => {\r\n        this.hideBuffering();\r\n        this.clearBufferingTimeout();\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * è®¾ç½®å…¨å±€äº‹ä»¶ç›‘å¬å™¨\r\n   * ä¸ºæ–‡æ¡£æ·»åŠ å…¨å±€é¼ æ ‡å’Œé”®ç›˜äº‹ä»¶ç›‘å¬å™¨ï¼Œç”¨äºå¤„ç†è¿›åº¦æ¡æ‹–åŠ¨å’Œå…¨å±€å¿«æ·é”®\r\n   */\r\n  private setupGlobalListeners(): void {\r\n    this.renderer.listen('document', 'mousemove', (event) =>\r\n      this.handleGlobalMouseMove(event));\r\n    this.renderer.listen('document', 'mouseup', () =>\r\n      this.handleGlobalMouseUp());\r\n    this.renderer.listen('document', 'keydown', (event) =>\r\n      this.handleGlobalKeyDown(event));\r\n  }\r\n\r\n  /**\r\n   * æ£€æµ‹è§†é¢‘æµç±»å‹ï¼ˆç›´æ’­/ç‚¹æ’­ï¼‰\r\n   * æ ¹æ®è§†é¢‘çš„durationå±æ€§åˆ¤æ–­æ˜¯ç›´æ’­æµè¿˜æ˜¯ç‚¹æ’­è§†é¢‘\r\n   */\r\n  private detectStreamType(): void {\r\n    if (!this.media?.nativeElement) return;\r\n\r\n    const duration = this.media.nativeElement.duration;\r\n    if (duration === Infinity || duration === 0) {\r\n      this.isLiveStream = true;\r\n    } else {\r\n      this.isLiveStream = false;\r\n      this.totalDuration = duration;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ¸…ç†èµ„æº\r\n   * åœ¨ç»„ä»¶é”€æ¯æ—¶æ¸…ç†æ‰€æœ‰å®šæ—¶å™¨ã€HLSå®ä¾‹å’Œå…¶ä»–èµ„æºï¼Œé˜²æ­¢å†…å­˜æ³„æ¼\r\n   */\r\n  private cleanupResources(): void {\r\n    // æ¸…ç†å®šæ—¶å™¨\r\n    if (this.controlHideTimeout) clearTimeout(this.controlHideTimeout);\r\n    if (this.bufferingTimeout) clearTimeout(this.bufferingTimeout);\r\n    if (this.bufferUpdateInterval) clearInterval(this.bufferUpdateInterval);\r\n\r\n    // æ¸…ç†HLSå®ä¾‹\r\n    if (this.hls) {\r\n      this.hls.stopLoad();\r\n      this.hls.detachMedia();\r\n      this.hls.destroy();\r\n    }\r\n\r\n    // æ¸…ç†æ§åˆ¶é¢æ¿é˜²æŠ–å®šæ—¶å™¨\r\n    Object.keys(this.controlDebounceTimers).forEach(key => {\r\n      if (this.controlDebounceTimers[key]) {\r\n        clearTimeout(this.controlDebounceTimers[key]);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * æ’­æ”¾å™¨å‡†å¤‡å°±ç»ªå›è°ƒ\r\n   * å½“Videogularæ’­æ”¾å™¨åˆå§‹åŒ–å®Œæˆåè°ƒç”¨ï¼Œè®¾ç½®åˆå§‹çŠ¶æ€å’Œäº‹ä»¶ç›‘å¬\r\n   * @param api è§†é¢‘æ’­æ”¾å™¨APIå®ä¾‹\r\n   */\r\n  onPlayerReady(api: VgApiService): void {\r\n    this.api = api;\r\n    this.api.volume = this.volume;\r\n    this.api.volume = 0; // åˆå§‹è®¾ç½®ä¸ºé™éŸ³\r\n    this.api.playbackRate = this.playbackRate;\r\n    this.api.play();\r\n    // ç›‘å¬æ’­æ”¾äº‹ä»¶\r\n    this.api.getDefaultMedia().subscriptions.play.subscribe(() => {\r\n      this.isPlaying = true;\r\n      this.showOverlayPlay = true;\r\n    });\r\n\r\n    // ç›‘å¬æš‚åœäº‹ä»¶\r\n    this.api.getDefaultMedia().subscriptions.pause.subscribe(() => {\r\n      this.isPlaying = false;\r\n      if (!this.isBuffering && !this.loadError) {\r\n        this.showOverlayPlay = true;\r\n      }\r\n    });\r\n\r\n    // å¼€å§‹æ§åˆ¶æ éšè—è®¡æ—¶å™¨\r\n    this.startControlBarTimer();\r\n  }\r\n\r\n  /**\r\n   * å¤„ç†HLSé”™è¯¯\r\n   * æ ¹æ®ä¸åŒç±»å‹çš„HLSé”™è¯¯é‡‡å–ç›¸åº”çš„å¤„ç†æªæ–½ï¼Œå¦‚é‡è¯•åŠ è½½æˆ–æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯\r\n   * @param data é”™è¯¯æ•°æ®ï¼ŒåŒ…å«é”™è¯¯è¯¦æƒ…å’Œç±»å‹\r\n   */\r\n  private handleHlsError(data: any): void {\r\n    console.error('HLS Error:', data.details);\r\n\r\n    // ç»Ÿä¸€ä½¿ç”¨handleVideoErrorå¤„ç†æ‰€æœ‰ç±»å‹çš„é”™è¯¯ï¼Œç¡®ä¿ä¸€è‡´çš„é‡è¯•é€»è¾‘\r\n    switch (data.details) {\r\n      case Hls.ErrorDetails.MANIFEST_LOAD_ERROR:\r\n      case Hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT:\r\n        // æ’­æ”¾åˆ—è¡¨åŠ è½½é”™è¯¯\r\n        this.handleVideoError('æ’­æ”¾åˆ—è¡¨åŠ è½½å¤±è´¥');\r\n        break;\r\n\r\n      case Hls.ErrorDetails.FRAG_LOAD_ERROR:\r\n      case Hls.ErrorDetails.FRAG_LOAD_TIMEOUT:\r\n        // ç‰‡æ®µåŠ è½½é”™è¯¯\r\n        this.handleVideoError('è§†é¢‘ç‰‡æ®µåŠ è½½å¤±è´¥');\r\n        break;\r\n\r\n      case Hls.ErrorDetails.BUFFER_STALLED_ERROR:\r\n        // ç¼“å†²åœæ»é”™è¯¯\r\n        // æ³¨æ„ï¼šè¿™ä¸ªé”™è¯¯æ˜¯åœ¨ç›‘å¬å™¨ä¸­ç‰¹åˆ«å¤„ç†çš„ï¼Œè¿™é‡Œä¸å†é‡å¤å¤„ç†\r\n        break;\r\n\r\n      default:\r\n        console.log(\"å…¶ä»–é”™è¯¯\")\r\n        this.handleVideoError('è§†é¢‘æ’­æ”¾é”™è¯¯');\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ˜¾ç¤ºç¼“å†²æŒ‡ç¤ºå™¨\r\n   * è®¾ç½®ç¼“å†²çŠ¶æ€ï¼Œéšè—è¦†ç›–æ’­æ”¾æŒ‰é’®ï¼Œå¹¶å¯åŠ¨ç¼“å†²è¶…æ—¶æ£€æµ‹\r\n   */\r\n  showBuffering(): void {\r\n    if (this.isBuffering) return;\r\n\r\n    this.isBuffering = true;\r\n    this.showOverlayPlay = false;\r\n    this.clearBufferingTimeout();\r\n\r\n    // è®¾ç½®è¶…æ—¶æ£€æµ‹\r\n    this.bufferingTimeout = setTimeout(() => {\r\n      if (this.isBuffering) {\r\n        this.handleVideoError('ç¼“å†²è¶…æ—¶');\r\n      }\r\n    }, this.bufferingTimeoutDuration);\r\n  }\r\n\r\n  /**\r\n   * éšè—ç¼“å†²æŒ‡ç¤ºå™¨\r\n   * é‡ç½®ç¼“å†²çŠ¶æ€å¹¶æ¸…ç†ç¼“å†²è¶…æ—¶å®šæ—¶å™¨\r\n   */\r\n  hideBuffering(): void {\r\n    this.isBuffering = false;\r\n    this.clearBufferingTimeout();\r\n  }\r\n\r\n  /**\r\n   * æ¸…é™¤ç¼“å†²è¶…æ—¶å®šæ—¶å™¨\r\n   * å–æ¶ˆç¼“å†²è¶…æ—¶æ£€æµ‹ï¼Œé˜²æ­¢åœ¨ç¼“å†²æ¢å¤åè§¦å‘é”™è¯¯å¤„ç†\r\n   */\r\n  clearBufferingTimeout(): void {\r\n    if (this.bufferingTimeout) {\r\n      clearTimeout(this.bufferingTimeout);\r\n      this.bufferingTimeout = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ›´æ–°ç¼“å­˜æ˜¾ç¤º\r\n   * è®¡ç®—å¹¶æ›´æ–°ç¼“å†²èŒƒå›´ã€ç¼“å†²ç™¾åˆ†æ¯”ç­‰å‚æ•°ï¼Œç”¨äºUIæ˜¾ç¤º\r\n   */\r\n  private updateBufferDisplay(): void {\r\n    if (!this.media?.nativeElement) return;\r\n\r\n    const video = this.media.nativeElement;\r\n    const currentTime = video.currentTime;\r\n    const duration = this.isLiveStream ? video.duration : this.totalDuration;\r\n\r\n    if (!isFinite(duration) || duration <= 0) return;\r\n\r\n    // åˆå§‹åŒ–ç¼“å†²èŒƒå›´\r\n    this.bufferedRanges = [];\r\n    let maxBufferEnd = 0;\r\n\r\n    // è·å–ç¼“å†²èŒƒå›´\r\n    for (let i = 0; i < video.buffered.length; i++) {\r\n      const start = video.buffered.start(i);\r\n      const end = video.buffered.end(i);\r\n\r\n      // è®¡ç®—æœ€å¤§ç¼“å†²èŒƒå›´\r\n      if (end > maxBufferEnd) {\r\n        maxBufferEnd = end;\r\n      }\r\n\r\n      // æ·»åŠ åˆ°ç¼“å†²èŒƒå›´åˆ—è¡¨\r\n      this.bufferedRanges.push({ start, end });\r\n    }\r\n\r\n    // è®¡ç®—ç¼“å†²ç™¾åˆ†æ¯”\r\n    this.bufferStart = currentTime;\r\n    this.bufferEnd = maxBufferEnd;\r\n\r\n    if (this.bufferEnd > 0 && duration > 0) {\r\n      this.bufferPercentage = (this.bufferEnd / duration) * 100;\r\n    }\r\n\r\n    // å¼ºåˆ¶æ›´æ–°UI\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * å¼€å§‹ç¼“å†²æ›´æ–°è®¡æ—¶å™¨\r\n   * è®¾ç½®å®šæ—¶æ›´æ–°ç¼“å†²çŠ¶æ€çš„è®¡æ—¶å™¨ï¼Œæ¯500æ¯«ç§’æ›´æ–°ä¸€æ¬¡\r\n   */\r\n  private startBufferUpdateTimer(): void {\r\n    this.bufferUpdateInterval = setInterval(() => {\r\n      this.updateBufferDisplay();\r\n    }, 500);\r\n  }\r\n\r\n\r\n  /**\r\n   * å¤„ç†è§†é¢‘é”™è¯¯\r\n   * è®¾ç½®é”™è¯¯çŠ¶æ€ï¼Œå¹¶æ ¹æ®é‡è¯•æ¬¡æ•°å†³å®šæ˜¯å¦è¿›è¡Œé‡è¯•\r\n   * @param message é”™è¯¯ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰\r\n   */\r\n  private handleVideoError(message?: string): void {\r\n    // å…ˆæ¸…é™¤ç¼“å†²è¶…æ—¶å®šæ—¶å™¨\r\n    this.clearBufferingTimeout();\r\n\r\n    // æ£€æŸ¥æ˜¯å¦éœ€è¦é‡è¯•\r\n    if (this.retryCount < this.maxRetries) {\r\n      // è®¾ç½®ä¸ºç¼“å†²çŠ¶æ€ï¼Œä¸æ˜¾ç¤ºé”™è¯¯\r\n      this.isBuffering = true;\r\n      this.loadError = false;\r\n      this.showOverlayPlay = false;\r\n\r\n      // å¢åŠ é‡è¯•è®¡æ•°\r\n      this.retryCount++;\r\n      console.log(`å°è¯•é‡è¯•åŠ è½½ (${this.retryCount}/${this.maxRetries})`);\r\n\r\n      // å»¶è¿Ÿé‡è¯•\r\n      setTimeout(() => this.retryLoading(), 1000 * this.retryCount);\r\n    } else {\r\n      // è¶…å‡ºé‡è¯•æ¬¡æ•°ï¼Œæ˜¾ç¤ºé”™è¯¯ç•Œé¢\r\n      this.hideBuffering();\r\n      this.loadError = true;\r\n      this.showOverlayPlay = false;\r\n      this.retryCount = 0;\r\n      console.log('åŠ è½½å¤±è´¥ï¼Œæ˜¾ç¤ºé”™è¯¯ç•Œé¢');\r\n\r\n      // å¼ºåˆ¶æ›´æ–°UIï¼Œç¡®ä¿é”™è¯¯ç•Œé¢æ­£ç¡®æ˜¾ç¤º\r\n      this.cdr.detectChanges();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * é‡è¯•åŠ è½½å½“å‰HLSæµ\r\n   * é‡ç½®é”™è¯¯çŠ¶æ€ï¼Œå°è¯•é‡æ–°åŠ è½½HLSæµï¼Œå¦‚æœå¤±è´¥åˆ™é‡æ–°åˆå§‹åŒ–æ’­æ”¾å™¨\r\n   */\r\n  retryLoading(): void {\r\n    // é‡ç½®é”™è¯¯çŠ¶æ€ï¼Œè®¾ç½®ä¸ºç¼“å†²çŠ¶æ€\r\n    this.loadError = false;\r\n    this.isBuffering = true;\r\n\r\n    console.log('å¼€å§‹é‡è¯•åŠ è½½è§†é¢‘æµ...');\r\n\r\n    if (this.hls) {\r\n      try {\r\n        // åœæ­¢å½“å‰åŠ è½½\r\n        this.hls.stopLoad();\r\n\r\n        // æ¸…é™¤ä¹‹å‰çš„é”™è¯¯äº‹ä»¶ç›‘å¬ï¼Œé¿å…é‡å¤è§¦å‘\r\n        this.hls.off(Hls.Events.ERROR);\r\n\r\n        // é‡æ–°æ·»åŠ é”™è¯¯äº‹ä»¶ç›‘å¬\r\n        this.hls.on(Hls.Events.ERROR, (event, data) => {\r\n          this.zone.run(() => {\r\n            this.handleHlsError(data);\r\n          });\r\n        });\r\n\r\n        // è®¾ç½®è¶…æ—¶æ£€æµ‹ï¼Œé¿å…åŠ è½½æ— å“åº”\r\n        const retryTimeout = setTimeout(() => {\r\n          console.error('é‡è¯•åŠ è½½è¶…æ—¶');\r\n          this.hideBuffering();\r\n          this.loadError = true;\r\n          this.retryCount = 0;\r\n        }, 3000);\r\n\r\n        // ç›‘å¬æ¸…å•åŠ è½½æˆåŠŸï¼Œæ¸…é™¤è¶…æ—¶æ£€æµ‹\r\n        const onManifestLoaded = () => {\r\n          clearTimeout(retryTimeout);\r\n          this.hls.off(Hls.Events.MANIFEST_LOADED, onManifestLoaded);\r\n        };\r\n\r\n        this.hls.on(Hls.Events.MANIFEST_LOADED, onManifestLoaded);\r\n\r\n        // é‡æ–°å¼€å§‹åŠ è½½\r\n        this.hls.startLoad();\r\n\r\n        // å°è¯•æ¢å¤æ’­æ”¾\r\n        setTimeout(() => {\r\n          if (this.api && this.api.state !== 'playing') {\r\n            try {\r\n              this.api.play();\r\n            } catch (e) {\r\n              console.error('æ¢å¤æ’­æ”¾å¤±è´¥:', e);\r\n            }\r\n          }\r\n        }, 500);\r\n      } catch (e) {\r\n        console.error('é‡è¯•åŠ è½½å¤±è´¥:', e);\r\n        this.hideBuffering();\r\n        this.loadError = true;\r\n        this.retryCount = 0;\r\n      }\r\n    } else {\r\n      try {\r\n        // å¦‚æœHLSå®ä¾‹ä¸å­˜åœ¨ï¼Œé‡æ–°åˆå§‹åŒ–\r\n        this.initializeHlsPlayer();\r\n      } catch (e) {\r\n        console.error('é‡æ–°åˆå§‹åŒ–æ’­æ”¾å™¨å¤±è´¥:', e);\r\n        this.hideBuffering();\r\n        this.loadError = true;\r\n        this.retryCount = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * å¼€å§‹æ‹–åŠ¨è¿›åº¦æ¡\r\n   * è®¾ç½®æ‹–åŠ¨çŠ¶æ€å¹¶æš‚åœæ’­æ”¾ï¼Œå¼€å§‹å¤„ç†è¿›åº¦æ‹–åŠ¨\r\n   * @param event é¼ æ ‡äº‹ä»¶å¯¹è±¡ï¼ŒåŒ…å«é¼ æ ‡ä½ç½®ä¿¡æ¯\r\n   */\r\n  startScrubbing(event: MouseEvent): void {\r\n    if (!this.api) return;\r\n\r\n    event.preventDefault();\r\n    this.isScrubbing = true;\r\n    this.wasPlaying = this.isPlaying;\r\n\r\n    if (this.wasPlaying) {\r\n      this.api.pause();\r\n    }\r\n\r\n    this.scrubStartX = event.clientX;\r\n    this.scrubStartPercentage = this.api.currentTime / this.api.duration;\r\n    this.handleGlobalMouseMove(event);\r\n  }\r\n\r\n  /**\r\n   * å¤„ç†å…¨å±€é¼ æ ‡ç§»åŠ¨äº‹ä»¶\r\n   * åœ¨æ‹–åŠ¨è¿›åº¦æ¡æ—¶è®¡ç®—å¹¶æ›´æ–°å½“å‰çš„æ’­æ”¾æ—¶é—´ç‚¹\r\n   * @param event é¼ æ ‡äº‹ä»¶å¯¹è±¡ï¼ŒåŒ…å«å½“å‰é¼ æ ‡ä½ç½®\r\n   */\r\n  private handleGlobalMouseMove(event: MouseEvent): void {\r\n    if (!this.isScrubbing || !this.api || !this.scrubBar) return;\r\n\r\n    const scrubBarEl = this.scrubBar.nativeElement;\r\n    const rect = scrubBarEl.getBoundingClientRect();\r\n    const position = Math.max(0, Math.min(rect.width, event.clientX - rect.left));\r\n    const percentage = position / rect.width;\r\n\r\n    // è®¾ç½®å½“å‰æ—¶é—´\r\n    this.api.currentTime = percentage * (this.isLiveStream ? this.api.duration : this.totalDuration);\r\n  }\r\n\r\n  /**\r\n   * å¤„ç†å…¨å±€é¼ æ ‡é‡Šæ”¾äº‹ä»¶\r\n   * ç»“æŸè¿›åº¦æ¡æ‹–åŠ¨ï¼Œæ¢å¤ä¹‹å‰çš„æ’­æ”¾çŠ¶æ€\r\n   */\r\n  private handleGlobalMouseUp(): void {\r\n    if (this.isScrubbing) {\r\n      this.isScrubbing = false;\r\n      if (this.wasPlaying && this.api) {\r\n        this.api.play();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * å¤„ç†å…¨å±€é”®ç›˜äº‹ä»¶\r\n   * æ ¹æ®æŒ‰ä¸‹çš„æŒ‰é”®æ‰§è¡Œç›¸åº”çš„æ’­æ”¾å™¨æ“ä½œï¼Œå¦‚æ’­æ”¾/æš‚åœã€å¿«è¿›/å¿«é€€ã€å…¨å±ç­‰\r\n   * @param event é”®ç›˜äº‹ä»¶å¯¹è±¡ï¼ŒåŒ…å«æŒ‰é”®ä¿¡æ¯\r\n   */\r\n  private handleGlobalKeyDown(event: KeyboardEvent): void {\r\n    const target = event.target as HTMLElement;\r\n    const tagName = target.tagName;\r\n\r\n    // å¦‚æœäº‹ä»¶ç›®æ ‡æ˜¯è¾“å…¥å…ƒç´ ï¼ˆINPUT, TEXTAREA, SELECTï¼‰æˆ–è€…å¯ç¼–è¾‘å…ƒç´ ï¼Œåˆ™å¿½ç•¥ [6](@ref)\r\n    if (tagName === 'INPUT' || tagName === 'TEXTAREA' ||\r\n      tagName === 'SELECT' || target.isContentEditable) {\r\n      return;\r\n    }\r\n\r\n    // å¤„ç†ESCé”® - æ¢å¤æ‰€æœ‰æ¨¡å¼åˆ°åˆå§‹çŠ¶æ€ [1,2,3,4](@ref)\r\n    if (event.key === 'Escape') {\r\n      this.resetAllModes();\r\n      this.resetControlBarTimer(); // æ˜¾ç¤ºæ§åˆ¶æ å¹¶é‡ç½®è®¡æ—¶å™¨\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      return;\r\n    }\r\n\r\n    // åŸæ¥çš„é€»è¾‘ï¼šå¦‚æœäº‹ä»¶ç›®æ ‡æ˜¯è§†é¢‘å…ƒç´ ï¼Œåˆ™äº¤ç»™handleKeyEventså¤„ç†\r\n    if (event.target === this.media.nativeElement) {\r\n      this.handleKeyEvents(event);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * å¼€å§‹æ§åˆ¶æ éšè—è®¡æ—¶å™¨\r\n   * æ˜¾ç¤ºæ§åˆ¶æ å¹¶è®¾ç½®å®šæ—¶å™¨ï¼Œåœ¨æŒ‡å®šæ—¶é—´åè‡ªåŠ¨éšè—æ§åˆ¶æ \r\n   */\r\n  startControlBarTimer(): void {\r\n    if (this.controlHideTimeout) {\r\n      clearTimeout(this.controlHideTimeout);\r\n    }\r\n\r\n    this.controlHideTimeout = setTimeout(() => {\r\n      this.hideControls = true;\r\n    }, 3000);\r\n  }\r\n\r\n  /**\r\n   * é‡ç½®æ§åˆ¶æ éšè—è®¡æ—¶å™¨\r\n   * æ¸…é™¤å·²å­˜åœ¨çš„æ§åˆ¶æ éšè—å®šæ—¶å™¨ï¼Œé˜²æ­¢é‡å¤è®¡æ—¶\r\n   */\r\n  resetControlBarTimer(): void {\r\n    this.hideControls = false;\r\n    this.startControlBarTimer();\r\n  }\r\n\r\n  /**\r\n   * å¤„ç†é¼ æ ‡ç§»åŠ¨\r\n   * å½“é¼ æ ‡åœ¨æ’­æ”¾å™¨ä¸Šç§»åŠ¨æ—¶ï¼Œæ˜¾ç¤ºæ§åˆ¶æ å¹¶é‡ç½®éšè—è®¡æ—¶å™¨\r\n   * @param event é¼ æ ‡äº‹ä»¶å¯¹è±¡\r\n   */\r\n  handleMouseMove(event: MouseEvent): void {\r\n    this.hideControls = false;\r\n    this.resetControlBarTimer();\r\n  }\r\n\r\n  /**\r\n   * å¤„ç†é”®ç›˜äº‹ä»¶\r\n   * @param event é”®ç›˜äº‹ä»¶\r\n   */\r\n  handleKeyEvents(event: KeyboardEvent): void {\r\n    if (!this.api) return;\r\n\r\n    if (event.key === ' ') {\r\n      if (!this.spaceKeyDebounced) {\r\n        this.togglePlayback();\r\n        this.spaceKeyDebounced = true;\r\n        setTimeout(() => this.spaceKeyDebounced = false, 300);\r\n      }\r\n      event.preventDefault();\r\n      return;\r\n    }\r\n    // å¤„ç†ESCé”® - æ¢å¤æ‰€æœ‰æ¨¡å¼åˆ°åˆå§‹çŠ¶æ€ [1,2](@ref)\r\n    if (event.key === 'Escape') {\r\n      this.resetAllModes();\r\n      this.resetControlBarTimer(); // æ˜¾ç¤ºæ§åˆ¶æ å¹¶é‡ç½®è®¡æ—¶å™¨\r\n      event.preventDefault();\r\n      return;\r\n    }\r\n\r\n    switch (event.key) {\r\n      case 'ArrowLeft':\r\n        this.api.currentTime = Math.max(0, this.api.currentTime - 5);\r\n        break;\r\n      case 'ArrowRight':\r\n        this.api.currentTime = Math.min(this.totalDuration, this.api.currentTime + 5);\r\n        break;\r\n      case 'ArrowUp':\r\n        this.volume = Math.min(1, this.volume + 0.05);\r\n        this.setVolume();\r\n        break;\r\n      case 'ArrowDown':\r\n        this.volume = Math.max(0, this.volume - 0.05);\r\n        this.setVolume();\r\n        break;\r\n      case 'm':\r\n      case 'M':\r\n        this.toggleMute();\r\n        break;\r\n      case 'f':\r\n      case 'F':\r\n        this.enterFullscreen();\r\n        break;\r\n      case 'w':\r\n      case 'W':\r\n        this.toggleWidescreen();\r\n        break;\r\n      case 't':\r\n      case 'T':\r\n        this.toggleTheaterMode();\r\n        break;\r\n      case '1':\r\n      case '2':\r\n      case '3':\r\n      case '4':\r\n      case '5':\r\n      case '6':\r\n      case '7':\r\n      case '8':\r\n      case '9':\r\n        const percent = parseInt(event.key) / 10;\r\n        this.api.currentTime = this.totalDuration * percent;\r\n        break;\r\n      case '>':\r\n        this.increaseSpeed();\r\n        break;\r\n      case '<':\r\n        this.decreaseSpeed();\r\n        break;\r\n      case '0':\r\n        this.api.currentTime = 0;\r\n        break;\r\n    }\r\n\r\n    this.resetControlBarTimer();\r\n  }\r\n\r\n  /**\r\n   * åˆ‡æ¢æ’­æ”¾çŠ¶æ€\r\n   * æ ¹æ®å½“å‰æ’­æ”¾çŠ¶æ€æ‰§è¡Œæš‚åœæˆ–æ’­æ”¾æ“ä½œï¼Œå¦‚æœ‰åŠ è½½é”™è¯¯åˆ™å°è¯•é‡è¯•\r\n   */\r\n  togglePlayback(): void {\r\n    if (this.api.state === 'playing') {\r\n      this.api.pause();\r\n    } else {\r\n      if (this.loadError) {\r\n        this.retryLoading();\r\n      } else {\r\n        this.api.play();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * å¼€å§‹æ’­æ”¾\r\n   * å°è¯•æ’­æ”¾è§†é¢‘å†…å®¹ï¼Œå¦‚æœ‰åŠ è½½é”™è¯¯åˆ™è¿›è¡Œé‡è¯•\r\n   */\r\n  startPlayback(): void {\r\n    if (this.loadError) {\r\n      this.retryLoading();\r\n    } else {\r\n      this.api.play();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è¿›å…¥å…¨å±æ¨¡å¼\r\n   * ä½¿ç”¨æµè§ˆå™¨å…¼å®¹çš„APIè¯·æ±‚å…¨å±æ˜¾ç¤ºè§†é¢‘å…ƒç´ \r\n   */\r\n  enterFullscreen(): void {\r\n    const videoElement = this.media.nativeElement as any;\r\n\r\n    // ä½¿ç”¨å…¼å®¹çš„å…¨å±API\r\n    if (typeof videoElement.requestFullscreen === 'function') {\r\n      videoElement.requestFullscreen();\r\n    }\r\n    // ä¸ºæµè§ˆå™¨å‰ç¼€æ·»åŠ å…¼å®¹æ”¯æŒ\r\n    else if (typeof videoElement.webkitRequestFullscreen === 'function') {\r\n      videoElement.webkitRequestFullscreen();\r\n    } else if (typeof videoElement.mozRequestFullScreen === 'function') {\r\n      videoElement.mozRequestFullScreen();\r\n    } else if (typeof videoElement.msRequestFullscreen === 'function') {\r\n      videoElement.msRequestFullscreen();\r\n    } else {\r\n      console.error('Fullscreen API not supported in this browser');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åˆ‡æ¢å®½å±æ¨¡å¼\r\n   * åˆ‡æ¢è§†é¢‘æ’­æ”¾å™¨çš„å®½å±æ˜¾ç¤ºçŠ¶æ€\r\n   */\r\n  toggleWidescreen(): void {\r\n    this.isWidescreen = !this.isWidescreen;\r\n  }\r\n\r\n  /**\r\n   * åˆ‡æ¢å…³ç¯æ¨¡å¼\r\n   * åˆ‡æ¢æ’­æ”¾å™¨çš„å…³ç¯æ¨¡å¼ï¼ˆå½±é™¢æ¨¡å¼ï¼‰ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹ä¼šè‡ªåŠ¨é€€å‡ºç½‘é¡µå…¨å±\r\n   */\r\n  toggleTheaterMode(): void {\r\n    this.isTheaterMode = !this.isTheaterMode;\r\n    if (this.isTheaterMode && this.isWebFullscreen) {\r\n      this.toggleWebFullscreen();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åˆ‡æ¢ç½‘é¡µå…¨å±\r\n   * åˆ‡æ¢ç½‘é¡µå…¨å±æ¨¡å¼ï¼Œæ·»åŠ æˆ–ç§»é™¤å…¨å±CSSç±»ï¼Œåœ¨è¿›å…¥ç½‘é¡µå…¨å±æ—¶ä¼šè‡ªåŠ¨é€€å‡ºå½±é™¢æ¨¡å¼\r\n   */\r\n  toggleWebFullscreen(): void {\r\n    this.isWebFullscreen = !this.isWebFullscreen;\r\n\r\n    if (this.isWebFullscreen) {\r\n      document.documentElement.classList.add('web-fullscreen');\r\n      if (this.isTheaterMode) {\r\n        this.isTheaterMode = false;\r\n      }\r\n    } else {\r\n      document.documentElement.classList.remove('web-fullscreen');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è®¾ç½®éŸ³é‡\r\n   * æ ¹æ®è¾“å…¥äº‹ä»¶æˆ–å½“å‰éŸ³é‡å€¼è®¾ç½®è§†é¢‘æ’­æ”¾å™¨çš„éŸ³é‡\r\n   * @param event è¾“å…¥äº‹ä»¶ï¼ˆå¯é€‰ï¼‰ï¼Œé€šå¸¸æ¥è‡ªéŸ³é‡æ§åˆ¶æ»‘å—\r\n   */\r\n  setVolume(event?: Event): void {\r\n    if (event) {\r\n      const target = event.target as HTMLInputElement;\r\n      this.volume = parseFloat(target.value);\r\n    }\r\n\r\n    if (this.api) {\r\n      this.api.volume = this.volume;\r\n      if (this.volume > 0 && this.isMuted) {\r\n        this.isMuted = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åˆ‡æ¢é™éŸ³\r\n   * åˆ‡æ¢æ’­æ”¾å™¨çš„é™éŸ³çŠ¶æ€ï¼ŒåŒæ—¶ä¿æŒåŸå§‹éŸ³é‡å€¼\r\n   */\r\n  toggleMute(): void {\r\n    this.isMuted = !this.isMuted;\r\n    if (this.api) {\r\n      this.api.volume = this.isMuted ? 0 : this.volume;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è®¾ç½®æ’­æ”¾é€Ÿç‡\r\n   * æ ¹æ®å½“å‰è®¾ç½®çš„æ’­æ”¾é€Ÿç‡å€¼æ›´æ–°è§†é¢‘æ’­æ”¾å™¨çš„å®é™…æ’­æ”¾é€Ÿåº¦\r\n   */\r\n  setPlaybackRate(): void {\r\n    if (this.api) {\r\n      this.api.playbackRate = this.playbackRate;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * å¢åŠ æ’­æ”¾é€Ÿåº¦\r\n   * å°†æ’­æ”¾é€Ÿåº¦å¢åŠ åˆ°é¢„è®¾é€Ÿåº¦é€‰é¡¹ä¸­çš„ä¸‹ä¸€ä¸ªæ›´é«˜å€¼\r\n   */\r\n  increaseSpeed(): void {\r\n    const currentIndex = this.speedOptions.findIndex(s => s.value === this.playbackRate);\r\n    if (currentIndex < this.speedOptions.length - 1) {\r\n      this.playbackRate = this.speedOptions[currentIndex + 1].value;\r\n      this.setPlaybackRate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * é™ä½æ’­æ”¾é€Ÿåº¦\r\n   * å°†æ’­æ”¾é€Ÿåº¦é™ä½åˆ°é¢„è®¾é€Ÿåº¦é€‰é¡¹ä¸­çš„ä¸‹ä¸€ä¸ªæ›´ä½å€¼\r\n   */\r\n  decreaseSpeed(): void {\r\n    const currentIndex = this.speedOptions.findIndex(s => s.value === this.playbackRate);\r\n    if (currentIndex > 0) {\r\n      this.playbackRate = this.speedOptions[currentIndex - 1].value;\r\n      this.setPlaybackRate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * é€‰æ‹©è§†é¢‘è´¨é‡\r\n   * åˆ‡æ¢è§†é¢‘çš„æ’­æ”¾è´¨é‡ï¼Œå¹¶é‡æ–°åˆå§‹åŒ–æ’­æ”¾å™¨ä»¥åº”ç”¨æ–°çš„è´¨é‡è®¾ç½®\r\n   * @param quality è´¨é‡é€‰é¡¹å¯¹è±¡ï¼ŒåŒ…å«URLå’Œå…¶ä»–è´¨é‡ç›¸å…³ä¿¡æ¯\r\n   */\r\n  selectQuality(quality: any): void {\r\n    console.log('Selected quality:', quality);\r\n    console.log(\"ä¿®æ”¹æ¸…æ™°åº¦\");\r\n\r\n    if (this.selectedQuality.url === quality.url) return;\r\n\r\n    this.selectedQuality = quality;\r\n    this.currentHlsUrl = quality.url;\r\n    this.showQualityOptions = false;\r\n\r\n    // é‡æ–°åˆå§‹åŒ–æ’­æ”¾å™¨\r\n    this.initializeHlsPlayer();\r\n\r\n    // é¢„åŠ è½½ç›¸é‚»è´¨é‡\r\n    // this.preloadAdjacentQualities();\r\n  }\r\n\r\n  /**\r\n   * é€‰æ‹©æ’­æ”¾é€Ÿåº¦\r\n   * è®¾ç½®æŒ‡å®šçš„æ’­æ”¾é€Ÿåº¦å¹¶æ›´æ–°æ’­æ”¾å™¨çŠ¶æ€ï¼ŒåŒæ—¶å…³é—­é€Ÿåº¦é€‰é¡¹èœå•\r\n   * @param speed æ’­æ”¾é€Ÿåº¦å€¼\r\n   */\r\n  selectSpeed(speed: number): void {\r\n    this.playbackRate = speed;\r\n    this.setPlaybackRate();\r\n    this.showSpeedOptions = false;\r\n  }\r\n\r\n  /**\r\n   * è·å–é€Ÿåº¦æ ‡ç­¾\r\n   * æ ¹æ®å½“å‰æ’­æ”¾é€Ÿåº¦å€¼è·å–å¯¹åº”çš„æ˜¾ç¤ºæ ‡ç­¾æ–‡æœ¬\r\n   * @returns æ’­æ”¾é€Ÿåº¦çš„æ˜¾ç¤ºæ ‡ç­¾\r\n   */\r\n  getSpeedLabel(): string {\r\n    const speedOption = this.speedOptions.find(s => s.value === this.playbackRate);\r\n    return speedOption ? speedOption.label : 'æ­£å¸¸';\r\n  }\r\n\r\n  /**\r\n   * æ§åˆ¶é¢æ¿æ˜¾ç¤ºæ§åˆ¶\r\n   * å¤„ç†æ§åˆ¶é¢æ¿ç»„ä»¶çš„æ‚¬åœæˆ–ç„¦ç‚¹è¿›å…¥äº‹ä»¶ï¼Œæ˜¾ç¤ºç›¸åº”çš„æ§åˆ¶é€‰é¡¹\r\n   * @param controlType æ§åˆ¶ç±»å‹ï¼Œæ”¯æŒè´¨é‡ã€é€Ÿåº¦æˆ–éŸ³é‡æ§åˆ¶\r\n   */\r\n  onControlEnter(controlType: 'quality' | 'speed' | 'volume'): void {\r\n    if (this.controlDebounceTimers[controlType]) {\r\n      clearTimeout(this.controlDebounceTimers[controlType]);\r\n      this.controlDebounceTimers[controlType] = null;\r\n    }\r\n\r\n    switch (controlType) {\r\n      case 'quality':\r\n        this.showQualityOptions = true;\r\n        break;\r\n      case 'speed':\r\n        this.showSpeedOptions = true;\r\n        break;\r\n      case 'volume':\r\n        this.showVolumeSlider = true;\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ§åˆ¶é¢æ¿éšè—æ§åˆ¶\r\n   * å¤„ç†æ§åˆ¶é¢æ¿ç»„ä»¶çš„æ‚¬åœæˆ–ç„¦ç‚¹ç¦»å¼€äº‹ä»¶ï¼Œè®¾ç½®å®šæ—¶å™¨åéšè—ç›¸åº”çš„æ§åˆ¶é€‰é¡¹\r\n   * @param controlType æ§åˆ¶ç±»å‹ï¼Œæ”¯æŒè´¨é‡ã€é€Ÿåº¦æˆ–éŸ³é‡æ§åˆ¶\r\n   */\r\n  onControlLeave(controlType: 'quality' | 'speed' | 'volume'): void {\r\n    if (this.controlDebounceTimers[controlType]) {\r\n      clearTimeout(this.controlDebounceTimers[controlType]);\r\n    }\r\n\r\n    this.controlDebounceTimers[controlType] = setTimeout(() => {\r\n      switch (controlType) {\r\n        case 'quality':\r\n          this.showQualityOptions = false;\r\n          break;\r\n        case 'speed':\r\n          this.showSpeedOptions = false;\r\n          break;\r\n        case 'volume':\r\n          this.showVolumeSlider = false;\r\n          break;\r\n      }\r\n      this.controlDebounceTimers[controlType] = null;\r\n    }, 150);\r\n  }\r\n\r\n  /**\r\n   * é‡ç½®æ‰€æœ‰è§†å›¾æ¨¡å¼\r\n   * æ¢å¤æ’­æ”¾å™¨çš„é»˜è®¤è§†å›¾çŠ¶æ€ï¼ŒåŒ…æ‹¬å…³é—­å®½å±ã€å½±é™¢æ¨¡å¼ï¼Œå…³é—­æ‰€æœ‰èœå•ï¼Œé€€å‡ºå…¨å±ç­‰\r\n   */\r\n  resetAllModes(): void {\r\n    this.isWidescreen = false;\r\n    this.isTheaterMode = false;\r\n\r\n    // å…³é—­æ‰€æœ‰å¼¹å‡ºèœå•\r\n    this.showQualityOptions = false;\r\n    this.showSpeedOptions = false;\r\n    this.showVolumeSlider = false;\r\n    this.showSettingsMenu = false;\r\n\r\n    // é€€å‡ºç½‘é¡µå…¨å±\r\n    if (this.isWebFullscreen) {\r\n      this.toggleWebFullscreen();\r\n    }\r\n\r\n    // é€€å‡ºæµè§ˆå™¨å…¨å±\r\n    if (document.fullscreenElement) {\r\n      document.exitFullscreen();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * å¤„ç†ä¸Šä¸‹æ–‡èœå•\r\n   * é˜»æ­¢é»˜è®¤çš„å³é”®ä¸Šä¸‹æ–‡èœå•æ˜¾ç¤ºï¼Œç”¨äºè‡ªå®šä¹‰æ’­æ”¾å™¨å³é”®èœå•\r\n   * @param event é¼ æ ‡äº‹ä»¶å¯¹è±¡\r\n   */\r\n  menu(event: Event): void {\r\n    event.preventDefault();\r\n  }\r\n\r\n  /**\r\n   * åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªè§†é¢‘\r\n   * å®ç°ç®€å•çš„æ’­æ”¾åˆ—è¡¨è½®æ’­åŠŸèƒ½ï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå¯ç”¨çš„è§†é¢‘è´¨é‡é€‰é¡¹\r\n   */\r\n  nextVideo(): void {\r\n    // ç®€å•è½®æ’­æ’­æ”¾åˆ—è¡¨\r\n    const currentIndex = this.availableQualities.findIndex(\r\n      q => q.url === this.selectedQuality.url\r\n    );\r\n\r\n    if (currentIndex >= 0) {\r\n      const nextIndex = (currentIndex + 1) % this.availableQualities.length;\r\n      this.selectedQuality = this.availableQualities[nextIndex];\r\n      this.currentHlsUrl = this.selectedQuality.url;\r\n      this.initializeHlsPlayer();\r\n    }\r\n  }\r\n\r\n\r\n  /**************************************************************************/\r\n  /*                                                                        */\r\n  /*                  æ–°å¢HLSç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°                                */\r\n  /*                                                                        */\r\n\r\n  /**************************************************************************/\r\n\r\n  /**\r\n   * è§†é¢‘å‡†å¤‡å°±ç»ªäº‹ä»¶\r\n   * å¤„ç†è§†é¢‘å¯ä»¥å¼€å§‹æ’­æ”¾çš„äº‹ä»¶ï¼Œéšè—ç¼“å†²æŒ‡ç¤ºå™¨ï¼Œæ£€æµ‹æµç±»å‹å¹¶æ›´æ–°è§†é¢‘æ—¶é•¿\r\n   * @param event äº‹ä»¶å¯¹è±¡\r\n   */\r\n  onCanPlay(event: Event): void {\r\n    this.hideBuffering();\r\n    this.loadError = false;\r\n\r\n    // æ£€æµ‹è§†é¢‘æµç±»å‹\r\n    this.detectStreamType();\r\n\r\n    // æ›´æ–°æ€»æ—¶é•¿\r\n    if (!this.isLiveStream && this.api) {\r\n      this.totalDuration = this.api.duration;\r\n    }\r\n\r\n    // æ›´æ–°ç¼“å†²æ˜¾ç¤º\r\n    this.updateBufferDisplay();\r\n  }\r\n\r\n  /**\r\n   * è§†é¢‘é”™è¯¯äº‹ä»¶\r\n   * å¤„ç†è§†é¢‘æ’­æ”¾è¿‡ç¨‹ä¸­çš„é”™è¯¯äº‹ä»¶ï¼Œè®°å½•é”™è¯¯ä¿¡æ¯å¹¶æ‰§è¡Œç›¸åº”çš„é”™è¯¯å¤„ç†\r\n   * @param event äº‹ä»¶å¯¹è±¡\r\n   */\r\n  onVideoError(event: Event): void {\r\n    console.error('Video error:', (event.target as HTMLVideoElement).error);\r\n    console.log(\"è§†é¢‘æ’­æ”¾é”™è¯¯\")\r\n    this.handleVideoError('è§†é¢‘æ’­æ”¾é”™è¯¯');\r\n  }\r\n\r\n  /**\r\n   * è§†é¢‘ç¼“å†²åœæ»äº‹ä»¶\r\n   * @param event äº‹ä»¶å¯¹è±¡\r\n   */\r\n  onStalled(event: Event): void {\r\n    this.showBuffering();\r\n  }\r\n\r\n  /**\r\n   * è§†é¢‘ç¼“å†²æ¢å¤äº‹ä»¶\r\n   * @param event äº‹ä»¶å¯¹è±¡\r\n   */\r\n  onPlaying(event: Event): void {\r\n    this.hideBuffering();\r\n  }\r\n\r\n  /**\r\n   * è§†é¢‘ç¼“å†²å¼€å§‹äº‹ä»¶\r\n   * @param event äº‹ä»¶å¯¹è±¡\r\n   */\r\n  onWaiting(event: Event): void {\r\n    this.showBuffering();\r\n  }\r\n\r\n  /**\r\n   * è§†é¢‘ç¼“å†²è¿›åº¦äº‹ä»¶\r\n   * @param event äº‹ä»¶å¯¹è±¡\r\n   */\r\n  onProgress(event: Event): void {\r\n    this.updateBufferDisplay();\r\n  }\r\n}\r\n","<!-- videogular.component.html -->\n<div class=\"video-container\" [class.theater-mode]=\"isTheaterMode\" [class.widescreen]=\"isWidescreen\"\n  (mousemove)=\"handleMouseMove($event)\" (mouseleave)=\"hideControls=true\" (contextmenu)=\"menu($event)\">\n  <!-- å…³ç¯æ¨¡å¼è’™å±‚ -->\n  <div class=\"dark-overlay\" *ngIf=\"isTheaterMode\"></div>\n\n  <vg-player (onPlayerReady)=\"onPlayerReady($event)\" #mediaPlayer tabindex=\"0\" (keydown)=\"handleKeyEvents($event)\"\n    [class.hide-controls]=\"hideControls\">\n    <!-- è§†é¢‘ä¸»ä½“ -->\n    <video [vgMedia]=\"$any(media)\" #media id=\"mainVideo\" preload=\"auto\" crossorigin=\"anonymous\" autoplay muted\n      playsinline [poster]=\"posterImage\" (canplay)=\"onCanPlay($event)\"\n      (error)=\"onVideoError($event)\" (stalled)=\"onStalled($event)\" (progress)=\"onProgress($event)\"\n      (waiting)=\"onWaiting($event)\" (playing)=\"onPlaying($event)\">\n      <!-- ä»…ä¿ç•™ä¸€ä¸ªsourceå…ƒç´ ç”¨äºHLS -->\n      <source [src]=\"currentHlsUrl\" type=\"application/x-mpegURL\">\n    </video>\n\n    <!-- æ’­æ”¾å™¨è¦†ç›–å±‚ -->\n    <vg-overlay-play *ngIf=\"showOverlayPlay\" (click)=\"togglePlayback()\"></vg-overlay-play>\n\n    <!-- è‡ªå®šä¹‰ç¼“å†²æŒ‡ç¤ºå™¨ -->\n    <div class=\"custom-buffering\" *ngIf=\"isBuffering\">\n      <div class=\"spinner\"></div>\n      <div class=\"buffering-text\">åŠ è½½ä¸­...</div>\n    </div>\n\n    <!-- åŠ è½½å¤±è´¥æç¤º -->\n    <div class=\"load-error\" *ngIf=\"loadError\">\n      <div class=\"error-icon\">âŒ</div>\n      <div class=\"error-text\">è§†é¢‘åŠ è½½å¤±è´¥</div>\n      <button class=\"retry-button\" (click)=\"retryLoading()\">é‡è¯•</button>\n    </div>\n\n    <!-- æ’­æ”¾å™¨æ§åˆ¶ç•Œé¢ -->\n    <vg-controls>\n      <!-- é¡¶éƒ¨è¿›åº¦æ¡ -->\n      <vg-scrub-bar class=\"top-scrub-bar\" #scrubBar (mousedown)=\"startScrubbing($event)\">\n        <vg-scrub-bar-current-time></vg-scrub-bar-current-time>\n      </vg-scrub-bar>\n\n      <!-- æ§åˆ¶æ ä¸»ä½“ -->\n      <div class=\"controls-container\">\n        <!-- å·¦ä¾§æ§åˆ¶ç»„ -->\n        <div class=\"left-controls\">\n          <!-- æ’­æ”¾/æš‚åœæŒ‰é’® -->\n          <vg-play-pause></vg-play-pause>\n\n          <!-- ä¸‹ä¸€ä¸ªæŒ‰é’® -->\n          <button class=\"next-button\" (click)=\"nextVideo()\" title=\"ä¸‹ä¸€ä¸ª\">\n            <i>â­ï¸</i>\n          </button>\n\n          <!-- æ—¶é—´æ˜¾ç¤º -->\n          <div class=\"time-display\">\n            <vg-time-display vgProperty=\"current\" vgFormat=\"mm:ss\"></vg-time-display>\n            <span>/</span>\n            <vg-time-display vgProperty=\"total\" vgFormat=\"mm:ss\"></vg-time-display>\n          </div>\n        </div>\n\n        <!-- å³ä¾§æ§åˆ¶ç»„ -->\n        <div class=\"right-controls\">\n          <!-- æ¸…æ™°åº¦æ§åˆ¶ -->\n          <div class=\"quality-control\" (mouseenter)=\"onControlEnter('quality')\"\n            (mouseleave)=\"onControlLeave('quality')\">\n            <div class=\"quality-trigger\">{{ selectedQuality.label }}</div>\n            <div class=\"quality-dropdown\" *ngIf=\"showQualityOptions\" [class.upward]=\"true\">\n              <ul>\n                <li *ngFor=\"let quality of availableQualities\" (click)=\"selectQuality(quality)\"\n                  [class.active]=\"quality.url === selectedQuality.url\">\n                  {{ quality.label }}\n                </li>\n              </ul>\n            </div>\n          </div>\n\n          <!-- å€é€Ÿæ§åˆ¶ -->\n          <div class=\"speed-control\" (mouseenter)=\"onControlEnter('speed')\" (mouseleave)=\"onControlLeave('speed')\">\n            <div class=\"speed-trigger\">{{ getSpeedLabel() }}</div>\n            <div class=\"speed-dropdown\" *ngIf=\"showSpeedOptions\" [class.upward]=\"true\">\n              <ul>\n                <li *ngFor=\"let speed of speedOptions\" (click)=\"selectSpeed(speed.value)\"\n                  [class.active]=\"speed.value === playbackRate\">\n                  {{ speed.label }}\n                </li>\n              </ul>\n            </div>\n          </div>\n\n          <!-- éŸ³é‡æ§åˆ¶ -->\n          <div class=\"volume-control\" (mouseenter)=\"onControlEnter('volume')\" (mouseleave)=\"onControlLeave('volume')\">\n            <button (click)=\"toggleMute()\" class=\"volume-button\">\n              <i *ngIf=\"!isMuted\" class=\"volume-icon\">ğŸ”Š</i>\n              <i *ngIf=\"isMuted\" class=\"volume-icon\">ğŸ”‡</i>\n            </button>\n            <div class=\"volume-slider-vertical\" *ngIf=\"showVolumeSlider\">\n              <input type=\"range\" min=\"0\" max=\"1\" step=\"0.05\" [(ngModel)]=\"volume\" (input)=\"setVolume($event)\"\n                class=\"volume-slider-vertical-input\">\n            </div>\n          </div>\n\n          <!-- è®¾ç½®æŒ‰é’® -->\n          <div class=\"s-c\">\n            <button class=\"s-b\" title=\"è®¾ç½®\">\n              <i>âš™ï¸</i>\n            </button>\n            <div class=\"s-d\">\n              <!-- è®¾ç½®èœå•æ ‡é¢˜ -->\n              <div class=\"s-h\">\n                <h4>æ’­æ”¾è®¾ç½®</h4>\n              </div>\n              \n              <!-- è®¾ç½®é€‰é¡¹ç»„ -->\n              <div class=\"s-g\">\n                <h5>è§†å›¾æ¨¡å¼</h5>\n                <div class=\"s-grid\">\n                  <button (click)=\"toggleWidescreen()\" [class.active]=\"isWidescreen\" title=\"å®½å±æ¨¡å¼\">\n                    <i class=\"s-i\">ğŸ–¥ï¸</i>\n                    <span>å®½å±æ¨¡å¼</span>\n                  </button>\n                  <button (click)=\"toggleWebFullscreen()\" [class.active]=\"isWebFullscreen\" title=\"ç½‘é¡µå…¨å±\">\n                    <i class=\"s-i\">ğŸ“±</i>\n                    <span>ç½‘é¡µå…¨å±</span>\n                  </button>\n                  <button (click)=\"toggleTheaterMode()\" [class.active]=\"isTheaterMode\" title=\"å…³ç¯æ¨¡å¼\">\n                    <i class=\"s-i\">ğŸŒ™</i>\n                    <span>å…³ç¯æ¨¡å¼</span>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- å…¨å±æ¨¡å¼ -->\n          <vg-fullscreen (click)=\"enterFullscreen()\"></vg-fullscreen>\n        </div>\n      </div>\n    </vg-controls>\n  </vg-player>\n\n  <!-- é”®ç›˜å¿«æ·é”®æç¤º -->\n  <div class=\"keyboard-hint\">\n    <span>ç©ºæ ¼:æ’­æ”¾/æš‚åœ</span>\n    <span>â†â†’:å¿«è¿›/å¿«é€€</span>\n    <span>â†‘â†“:éŸ³é‡è°ƒèŠ‚</span>\n    <span>1-9:è·³è½¬è¿›åº¦</span>\n  </div>\n</div>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { VgCoreModule } from '@videogular/ngx-videogular/core';\nimport { VgControlsModule } from '@videogular/ngx-videogular/controls';\nimport { VgOverlayPlayModule } from '@videogular/ngx-videogular/overlay-play';\nimport { VgBufferingModule } from '@videogular/ngx-videogular/buffering';\nimport { Videogular } from './videogular';\n\n/**\n * FmodeVideoModule æä¾›è§†é¢‘æ’­æ”¾å™¨ç»„ä»¶çš„NgModuleåŒ…è£…\n * é€‚ç”¨äºä¼ ç»Ÿçš„Angularæ¨¡å—ç³»ç»Ÿ\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    VgCoreModule,\n    VgControlsModule,\n    VgOverlayPlayModule,\n    VgBufferingModule,\n    Videogular // å¯¹äºstandaloneç»„ä»¶ï¼Œåº”è¯¥ç›´æ¥å¯¼å…¥è€Œä¸æ˜¯å£°æ˜\n  ],\n  exports: [Videogular]\n})\nexport class FmodeVideoModule { }","/*\r\n * Public API Surface of fmode-video\r\n */\r\n\r\nexport * from './lib/videogular';\r\nexport * from './lib/videogular.module';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}