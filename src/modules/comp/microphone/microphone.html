<div class="recorder-container">
  <h1>Angular录音应用</h1>

  <div class="visualizer-container">
    <canvas #audioVisualizer width="600" height="150"></canvas>
  </div>

  <div class="recording-time">
    <span>{{ recordingTime | timeFormat }}</span>
  </div>

  <div class="controls">
    <ng-container *ngIf="recordingState === 'idle'">
      <button (click)="startRecording()" class="control-btn start-btn">
        <i class="fas fa-microphone"></i> 开始录音
      </button>
    </ng-container>

    <ng-container *ngIf="recordingState === 'recording'">
      <button (click)="pauseRecording()" class="control-btn pause-btn">
        <i class="fas fa-pause"></i> 暂停
      </button>
      <button (click)="stopRecording()" class="control-btn stop-btn">
        <i class="fas fa-stop"></i> 停止
      </button>
    </ng-container>

    <ng-container *ngIf="recordingState === 'paused'">
      <button (click)="resumeRecording()" class="control-btn resume-btn">
        <i class="fas fa-play"></i> 继续
      </button>
      <button (click)="stopRecording()" class="control-btn stop-btn">
        <i class="fas fa-stop"></i> 停止
      </button>
    </ng-container>
  </div>

  <div *ngIf="audioUrl" class="playback-section">
    <h2>录音回放</h2>
    <audio #audioPlayer [src]="audioUrl" controls></audio>
    <button (click)="downloadRecording()" class="download-btn">
      <i class="fas fa-download"></i> 下载录音
    </button>
  </div>

  <div class="instructions">
    <h3>使用说明：</h3>
    <ol>
      <li>点击"开始录音"按钮开始录制音频</li>
      <li>录音过程中可以暂停和继续</li>
      <li>点击"停止"按钮结束录音</li>
      <li>录音结束后可以回放或下载</li>
    </ol>
    <p class="note">注意：请确保已授予浏览器麦克风访问权限</p>
  </div>
</div>
