<!-- login-page.component.html -->
<div class="login-container">
  <div class="login-card">
    <h2>用户登录</h2>

    <!-- 登录表单 -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
      <div class="form-group">
        <label for="username">用户名</label>
        <input
          id="username"
          type="text"
          formControlName="username"
          placeholder="请输入用户名"
          class="form-control"
        />
      </div>

      <div class="form-group">
        <label for="password">密码</label>
        <input
          id="password"
          type="password"
          formControlName="password"
          placeholder="请输入密码"
          class="form-control"
        />
      </div>

      <!-- 提示信息 -->
      <div class="hint">
        <small>提示：默认账号 <strong>admin</strong>，密码 <strong>123456</strong></small>
      </div>

      <!-- 错误提示 -->
      <div *ngIf="loginError" class="alert alert-error">{{ loginError }}</div>

      <!-- 一键登录按钮 -->
      <button type="button" (click)="quickLogin()" [disabled]="isLoading" class="btn btn-secondary mb-2">
        一键登录
      </button>

      <!-- 登录按钮 -->
      <button type="submit" [disabled]="isLoading" class="btn btn-primary">
        <span *ngIf="isLoading" class="spinner"></span>
        {{ isLoading ? '登录中...' : '登 录' }}
      </button>
    </form>

    <!-- 定位结果展示 -->
    <div *ngIf="locationResult.message !== '未开始定位'" class="location-result">
      <h3>📍 用户位置分析</h3>
      <ul>
        <li><strong>状态：</strong>
          <span [class.success]="locationResult.success" [class.error]="!locationResult.success">
            {{ locationResult.success ? '成功' : '失败' }}
          </span>
        </li>
        <li><strong>消息：</strong> {{ locationResult.message }}</li>
        <ng-container *ngIf="locationResult.success">
          <li><strong>所在省份：</strong> {{ locationResult.province }}</li>
          <li><strong>坐标：</strong> ({{ locationResult.lng | number:'1.4-4' }}, {{ locationResult.lat | number:'1.4-4' }})</li>
        </ng-container>
      </ul>
      <p><small>此信息将用于用户分布统计分析，不会存储精确位置。</small></p>
    </div>
  </div>
</div>
