<div class="checklist-container">
  <!-- 步骤列表 -->
  <div class="steps-list">
    <div
      *ngFor="let step of steps"
      class="step-item"
      [class.disabled]="!isStepClickable(step.id)"
      [class]="getStepStatusClass(step)"
      (click)="handleStepClick(step.id)"
    >
      <!-- 左侧状态指示器 -->
      <div class="status-indicator">
        <div class="indicator-circle" [class.active]="step.id === currentStepId">
          <span *ngIf="step.completed">✓</span>
          <span *ngIf="!step.completed && step.id !== currentStepId">{{ step.id }}</span>
        </div>
        <div class="timeline" *ngIf="!isLastStep(step.id)"></div>
      </div>

      <!-- 步骤内容 -->
      <div class="step-content">
        <div class="step-header">
          <span class="step-title">{{ step.title }}</span>
          <span class="step-status">
            <span *ngIf="step.id === currentStepId && !step.completed">
              进行中
            </span>
            <span *ngIf="step.completed">
              已完成
            </span>
          </span>
        </div>
        <p class="step-desc">{{ step.description }}</p>
      </div>
    </div>
  </div>

  <!-- 操作按钮 -->
  <div class="action-container">
    <button
      class="complete-button"
      *ngIf="canCompleteCurrentStep"
      (click)="completeCurrentStep()"
    >
      完成 {{ currentStep?.title }}
    </button>
  </div>
</div>
