<!-- lottery.component.html -->
<div class="lottery-container">
  <!-- é¡¶éƒ¨ç»Ÿè®¡åŒºåŸŸ -->
  <div class="header">
    <h1 class="title">ğŸ’ é’»çŸ³æŠ½å¥–ç³»ç»Ÿ ğŸ’</h1>
    <div class="stats">
      <div class="stat-card">
        <span class="stat-label">æ€»é’»çŸ³æ•°</span>
        <span class="stat-value">{{ totalDiamondsConfig | number }}</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">å‚ä¸äººæ•°</span>
        <span class="stat-value">{{ participants.length | number }}</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">ä¸­å¥–äººæ•°</span>
        <span class="stat-value">{{ winners.length | number }}</span>
      </div>
    </div>
  </div>

  <!-- æ§åˆ¶é¢æ¿ -->
  <div class="control-panel">
    <div class="config-card">
      <h2>æŠ½å¥–é…ç½®</h2>

      <!-- æ€»é’»çŸ³æ•°é…ç½® -->
      <div class="config-group">
        <label>æ€»é’»çŸ³æ•°é‡</label>
        <input type="number" [(ngModel)]="totalDiamondsConfig" min="1"
               (change)="autoAdjustGrades()">
        <span class="hint">å½“å‰å®é™…é’»çŸ³: {{currentTotalDiamonds | number}}</span>
      </div>

      <!-- é’»çŸ³æ¡£æ¬¡è®¾ç½® -->
      <div class="config-group">
        <label>é’»çŸ³æ¡£æ¬¡è®¾ç½®</label>
        <div class="grade" *ngFor="let grade of diamondGrades; let i = index">
          <span>æ¡£æ¬¡ {{ i + 1 }}ï¼š</span>
          <input type="number" [(ngModel)]="grade.diamonds" min="1"
                 placeholder="é’»çŸ³æ•°é‡" (change)="autoAdjustGrades()">
          <input type="number" [(ngModel)]="grade.winners" min="1"
                 placeholder="ä¸­å¥–äººæ•°">
          <button (click)="removeGrade(i)" class="btn-remove">Ã—</button>
        </div>
        <button (click)="addGrade()" class="btn-add">+ æ·»åŠ æ¡£æ¬¡</button>
      </div>

      <!-- å‚ä¸äººæ•°è®¾ç½® -->
      <div class="config-group">
        <label>å‚ä¸äººæ•°</label>
        <input type="number" [(ngModel)]="totalParticipants" min="1" max="100000">
      </div>

      <!-- æ“ä½œæŒ‰é’® -->
      <div class="action-buttons">
        <button (click)="generateParticipants()" class="btn-generate">ç”Ÿæˆå‚ä¸è€…</button>
        <button (click)="runLottery()" class="btn-lottery">å¼€å§‹æŠ½å¥–</button>
        <button (click)="reset()" class="btn-reset">é‡ç½®</button>
      </div>
    </div>

    <!-- å¯è§†åŒ–åŒºåŸŸ -->
    <div class="visualization">
      <div class="diamond-animation">
        <div *ngFor="let diamond of animatedDiamonds" class="diamond"
             [style.left]="diamond.x + '%'"
             [style.top]="diamond.y + '%'"
             [style.animation-delay]="diamond.delay + 's'">
          ğŸ’
        </div>
      </div>
    </div>
  </div>

  <!-- ä¸­å¥–ç»“æœåŒºåŸŸ -->
  <div class="results-section">
    <h2>ä¸­å¥–ç»“æœ</h2>
    <div class="results-header">
      <span>å‚ä¸è€…ID</span>
      <span>ä¸­å¥–æ¡£æ¬¡</span>
      <span>è·å¾—é’»çŸ³</span>
    </div>
    <div class="results-container">
      <div *ngFor="let winner of winners" class="winner-card">
        <span class="participant-id">#{{ winner.id }}</span>
        <span class="grade">æ¡£æ¬¡ {{ winner.grade }}</span>
        <span class="diamonds">{{ winner.diamonds }} ğŸ’</span>
      </div>
    </div>
  </div>
</div>
